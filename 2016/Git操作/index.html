<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#FD6C6C">






  
  
    
      
    
    
      
    
  <script src="https://cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
  <link href="https://cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-flash.min.css" rel="stylesheet">




  
  
    
  
  <link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/han-css@3.3.0/dist/han.min.css">




<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
    
  
  <link href="https://cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="https://fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico?v=6.4.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico?v=6.4.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico?v=6.4.0">


  <link rel="mask-icon" href="/favicon.ico?v=6.4.0" color="#FD6C6C">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.4.0',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false,"width":260},
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="花了好几天的时间，才迁移完git学习笔记，进行了重新整理，记录了常用操作。不知不觉Git已经用了2年的时间，虽然不久，但已经深深爱上了这个家伙~~~">
<meta name="keywords" content="开发配置">
<meta property="og:type" content="article">
<meta property="og:title" content="Git操作">
<meta property="og:url" content="https://blog.myoss.app/2016/Git操作/index.html">
<meta property="og:site_name" content="Jerry&#39;s Blog - 碎碎念">
<meta property="og:description" content="花了好几天的时间，才迁移完git学习笔记，进行了重新整理，记录了常用操作。不知不觉Git已经用了2年的时间，虽然不久，但已经深深爱上了这个家伙~~~">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://blog.myoss.app/images/git-trees.png">
<meta property="og:image" content="https://blog.myoss.app/images/git-stage.png">
<meta property="og:updated_time" content="2018-07-28T01:47:58.785Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git操作">
<meta name="twitter:description" content="花了好几天的时间，才迁移完git学习笔记，进行了重新整理，记录了常用操作。不知不觉Git已经用了2年的时间，虽然不久，但已经深深爱上了这个家伙~~~">
<meta name="twitter:image" content="https://blog.myoss.app/images/git-trees.png">



  <link rel="alternate" href="/atom.xml" title="Jerry's Blog - 碎碎念" type="application/atom+xml" />




  <link rel="canonical" href="https://blog.myoss.app/2016/Git操作/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Git操作 | Jerry's Blog - 碎碎念</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-72820115-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-72820115-1');
</script>



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?990c476c5fa9f37c6314c8b41a9ac36f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jerry's Blog - 碎碎念</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">我想就这样牵着 你的手不放开</h1>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档<span class="badge">18</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类<span class="badge">13</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签<span class="badge">5</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-commonweal">
    <a href="/404.html" rel="section">
      <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />公益 404</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.myoss.app/2016/Git操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jerry">
      <meta itemprop="description" content="好记性不如烂笔头">
      <meta itemprop="image" content="https://blog-1257248892.cos.ap-shanghai.myqcloud.com/static/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jerry's Blog - 碎碎念">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Git操作
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-01-20 14:37:00" itemprop="dateCreated datePublished" datetime="2016-01-20T14:37:00+08:00">2016-01-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-28 09:47:58" itemprop="dateModified" datetime="2018-07-28T09:47:58+08:00">2018-07-28</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/Git操作/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2016/Git操作/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/Git操作/" class="leancloud_visitors" data-flag-title="Git操作">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数：</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">44k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">40 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <p>花了好几天的时间，才迁移完<a href="https://github.com/myoss/study/blob/master/git_notes.txt" target="_blank" rel="noopener">git学习笔记</a>，进行了重新整理，记录了常用操作。不知不觉<code>Git</code>已经用了2年的时间，虽然不久，但已经深深爱上了这个家伙~~~</p>
<a id="more"></a>
<h1 id="git-config"><a href="#git-config" class="headerlink" title="git config"></a>git config</h1><p><br>使用方法如下，如果没有指定位置参数省略的话，大部分命令默认为：<code>--local</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config [&lt;--system&gt; | &lt;--global&gt; | &lt;--<span class="built_in">local</span>&gt;] [option]</span><br></pre></td></tr></table></figure>
<h2 id="配置优先级"><a href="#配置优先级" class="headerlink" title="配置优先级"></a>配置优先级</h2><p>配置生效优先级：<code>1.</code> &gt; <code>2.</code> &gt; <code>3.</code>，即相同参数的配置优先级</p>
<ol>
<li><code>.git/config</code> 工作目录下的配置，使用：<code>git config --local</code></li>
<li><code>~/.gitconfig</code> 用户目录下的配置，使用：<code>git config --global</code></li>
<li><code>/etc/gitconfig</code> 对所有用户都适用的配置，使用：<code>git cofing --system</code></li>
</ol>
<h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><h3 id="查看生效的配置"><a href="#查看生效的配置" class="headerlink" title="查看生效的配置"></a>查看生效的配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git config -l <span class="comment">#查看所有配置</span></span><br><span class="line">git config --list <span class="comment">#查看所有配置</span></span><br><span class="line">git config --system -l <span class="comment">#查看系统用户的所有配置</span></span><br><span class="line">git config --system --list <span class="comment">#查看系统用户的所有配置</span></span><br><span class="line">git config --global -l <span class="comment">#查看当前用户的所有配置</span></span><br><span class="line">git config --global --list <span class="comment">#查看当前用户的所有配置</span></span><br><span class="line">git config --<span class="built_in">local</span> -l <span class="comment">#查看当前工作目录下的所有配置</span></span><br><span class="line">git config --<span class="built_in">local</span> --list <span class="comment">#查看当前工作目录下的所有配置</span></span><br></pre></td></tr></table></figure>
<h3 id="查看某个参数的配置"><a href="#查看某个参数的配置" class="headerlink" title="查看某个参数的配置"></a>查看某个参数的配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config user.name <span class="comment">#查看当前工作目录下的“用户名称”的配置</span></span><br><span class="line">git config --<span class="built_in">local</span> user.name <span class="comment">#查看当前工作目录下的“用户名称”的配置，可以省略：--local</span></span><br><span class="line">git config --global user.name <span class="comment">#查看当前用户的“用户名称”的配置</span></span><br></pre></td></tr></table></figure>
<h3 id="设置用户名称和用户Email地址"><a href="#设置用户名称和用户Email地址" class="headerlink" title="设置用户名称和用户Email地址"></a>设置用户名称和用户Email地址</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">"John Doe"</span></span><br><span class="line">git config --global user.email johndoe@example.com</span><br><span class="line">git config --<span class="built_in">local</span> user.name <span class="string">"John Doe"</span></span><br><span class="line">git config --<span class="built_in">local</span> user.email johndoe@example.com</span><br></pre></td></tr></table></figure>
<h3 id="换行符：CRLF-LF"><a href="#换行符：CRLF-LF" class="headerlink" title="换行符：CRLF/LF"></a>换行符：CRLF/LF</h3><p>在Windows系统上，把它设置成<code>true</code>，这样当签出代码时，<code>LF</code>会被转换成<code>CRLF</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.autocrlf <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>Linux或Mac系统上，因此你不想Git在签出文件时进行自动的转换；当一个以<code>CRLF</code>为行结束符的文件不小心被引入时你肯定想进行修正，设置成<code>input</code>来告诉Git在提交时把<code>CRLF</code>转换成<code>LF</code>，签出时不转换</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.autocrlf input</span><br></pre></td></tr></table></figure>
<p>如果仅运行在Windows上的项目，可以设置<code>false</code>取消此功能，把回车符记录在库中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.autocrlf <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h3 id="换行符：SafeCRLF"><a href="#换行符：SafeCRLF" class="headerlink" title="换行符：SafeCRLF"></a>换行符：SafeCRLF</h3><p>拒绝提交包含混合换行符的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.safecrlf <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>允许提交包含混合换行符的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.safecrlf <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>提交包含混合换行符的文件时给出警告</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.safecrlf warn</span><br></pre></td></tr></table></figure>
<h3 id="core-quotepath"><a href="#core-quotepath" class="headerlink" title="core.quotepath"></a>core.quotepath</h3><p>在使用git的时候，经常会碰到有一些中文文件名或者路径被转义成\xx\xx\xx之类的，此时可以通过git的配置来改变默认转义</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.quotepath <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h3 id="core-pager"><a href="#core-pager" class="headerlink" title="core.pager"></a>core.pager</h3><p>core.pager指定 Git 运行诸如log、diff等所使用的分页器，你能设置成用more或者任何你喜欢的分页器（默认用的是less）， 当然你也可以什么都不用，设置空字符串：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.pager <span class="string">''</span></span><br></pre></td></tr></table></figure>
<h3 id="其它配置"><a href="#其它配置" class="headerlink" title="其它配置"></a>其它配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.editor vim <span class="comment">#设置文本编辑器</span></span><br><span class="line">git config --global color.ui <span class="literal">true</span></span><br><span class="line">git config --global alias.st status <span class="comment">#设置别名</span></span><br><span class="line">git config receive.denyNonFastForwards <span class="literal">true</span> <span class="comment">#禁止非快进试推送</span></span><br><span class="line">git config --global merge.tool kdiff3</span><br><span class="line">git config --global diff.word.textconv strings <span class="comment">#在比较前把Word文件转换成文本文件</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="工作区"><a href="#工作区" class="headerlink" title="工作区"></a>工作区</h1><hr>
<h1 id="暂存区"><a href="#暂存区" class="headerlink" title="暂存区"></a>暂存区</h1><p><br>暂存区，又称为<code>--stage</code>或<code>--index</code>，是一个介于工作区和版本库的中间状态，当执行提交时，实际上是将暂存区的内容提交到版本库中。</p>
<hr>
<h1 id="版本库"><a href="#版本库" class="headerlink" title="版本库"></a>版本库</h1><h2 id="工作区-暂存区-版本库，三者的关系图"><a href="#工作区-暂存区-版本库，三者的关系图" class="headerlink" title="工作区/暂存区/版本库，三者的关系图"></a>工作区/暂存区/版本库，三者的关系图</h2><p><img src="/images/git-trees.png" alt=""><br><img src="/images/git-stage.png" alt=""></p>
<hr>
<h1 id="HEAD"><a href="#HEAD" class="headerlink" title="HEAD"></a>HEAD</h1><p><br><code>HEAD</code>是当前分支引用的指针，它总是指向该分支上的最后一次提交。这表示 <code>HEAD</code>将是下一次提交的父节点。通常，理解<code>HEAD</code>的最简方式，就是将它看做 你的上一次提交 的快照。<br>符号<code>^</code>可以用于指代父提交</p>
<blockquote>
<p><code>HEAD^</code>代表版本库中的上一次提交，即最近一次提交的父提交<br><code>HEAD^^</code>则代表<code>HEAD^</code>的父提交<br>对于一个提交有多个父提交，可以在符号<code>^</code>后面用数字表示是第几个父提交</p>
</blockquote>
<h2 id="查看快照"><a href="#查看快照" class="headerlink" title="查看快照"></a>查看快照</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ git cat-file -p HEAD</span><br><span class="line">tree 684768932f4b16ef45aa5e87793a76470fb8becb</span><br><span class="line">parent ae1ffd161d1ffb564ba2a0e87dae45ec63ea5eea</span><br><span class="line">author Jerry.Chen &lt;balabala@gmail.com&gt; 1453474460 +0800</span><br><span class="line">committer Jerry.Chen &lt;balabala@gmail.com&gt; 1453474460 +0800</span><br><span class="line"></span><br><span class="line">commit with -a</span><br><span class="line"></span><br><span class="line">``</span><br><span class="line"></span><br><span class="line"><span class="comment">## 查看引用日志，是`HEAD`头指针的变迁记录，而非`master`分支</span></span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">$ git reflog</span><br><span class="line">ae1ffd1 HEAD@&#123;0&#125;: checkout: moving from b2 to master</span><br><span class="line">48c54d7 HEAD@&#123;1&#125;: checkout: moving from master to b2</span><br><span class="line">ae1ffd1 HEAD@&#123;2&#125;: checkout: moving from master to master</span><br></pre></td></tr></table></figure>
<h2 id="查看引用日志的输出"><a href="#查看引用日志的输出" class="headerlink" title="查看引用日志的输出"></a>查看引用日志的输出</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ git show HEAD@&#123;0&#125;</span><br><span class="line">commit ae1ffd161d1ffb564ba2a0e87dae45ec63ea5eea</span><br><span class="line">Merge: 3bce065 17ce0b6</span><br><span class="line">Author: Jerry &lt;jerry@china.com&gt;</span><br><span class="line">Date:   Sun Apr 20 16:05:08 2014 +0800</span><br><span class="line"></span><br><span class="line">    merge ...</span><br><span class="line"></span><br><span class="line">diff --cc hello.md</span><br><span class="line">index 1e644f0,11f9129..70b7830</span><br><span class="line">--- a/hello.md</span><br><span class="line">+++ b/hello.md</span><br><span class="line">@@@ -6,7 -6,7 +6,8 @@@</span><br><span class="line">  5 modify</span><br><span class="line">  6 modify by jerry</span><br><span class="line">  6 modify</span><br><span class="line"> +7 modify by jerry</span><br><span class="line">+ 7 modify</span><br><span class="line">  branch b1 1 modify  branch b1 3 modify</span><br><span class="line">  branch b1 2 modify  branch b1 4 modify</span><br><span class="line">  branch b2 1 modify</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="SSH-Key"><a href="#SSH-Key" class="headerlink" title="SSH Key"></a>SSH Key</h1><h2 id="查看已经保存的SSH密钥"><a href="#查看已经保存的SSH密钥" class="headerlink" title="查看已经保存的SSH密钥"></a>查看已经保存的SSH密钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -lart ~/.ssh</span><br></pre></td></tr></table></figure>
<h2 id="生成SSH密钥"><a href="#生成SSH密钥" class="headerlink" title="生成SSH密钥"></a>生成SSH密钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"your_email@example.com"</span></span><br></pre></td></tr></table></figure>
<p>查看公钥（<code>*.pub</code>）文件的内容，如果没有修改密钥的位置和保存的路径，直接复制<code>cat</code>出来的内容，粘帖到你需要用到的地方</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h1><p><br>克隆操作，使用方法如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> [&lt;options&gt;] [--] &lt;repository&gt; [&lt;directory&gt;]</span><br></pre></td></tr></table></figure></p>
<h2 id="包含工作区的版本库"><a href="#包含工作区的版本库" class="headerlink" title="包含工作区的版本库"></a>包含工作区的版本库</h2><p>在本地创建一个<repository>的克隆工作区，所有的文件都会检出，如果设置了<code>[&lt;directory&gt;]</code>，则会将此名称做为克隆的文件夹名称</repository></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;repository&gt; [&lt;directory&gt;]</span><br></pre></td></tr></table></figure>
<h2 id="裸版本库，不包含工作区"><a href="#裸版本库，不包含工作区" class="headerlink" title="裸版本库，不包含工作区"></a>裸版本库，不包含工作区</h2><p>不包含工作区，直接就是版本库的内容，这样的版本库称为裸版本库。一般约定俗成裸版本库的目录名以<code>.git</code>为后缀，所以下面实例中将克隆出来的裸版本库目录名写作<code>&lt;directory.git&gt;</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --bare &lt;repository&gt; &lt;directory.git&gt;</span><br><span class="line">git <span class="built_in">clone</span> --mirror &lt;repository&gt; &lt;directory.git&gt;</span><br></pre></td></tr></table></figure>
<p><code>git clone --mirror</code> 克隆出来的裸版本对上游版本进行了注册，这样可以在裸版本库中使用<code>git fetch</code>命令和上游版本库进行持续同步</p>
<h2 id="支持的多种协议"><a href="#支持的多种协议" class="headerlink" title="支持的多种协议"></a>支持的多种协议</h2><p>常用的一些协议，不是全部</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> file:///opt/git/project.git</span><br><span class="line">git <span class="built_in">clone</span> /opt/git/project.git</span><br><span class="line">git <span class="built_in">clone</span> ssh://user@server:project.git</span><br><span class="line">git <span class="built_in">clone</span> http[s]://example.com/gitproject.git</span><br><span class="line">git <span class="built_in">clone</span> git://example.com/path/to/repo.git/</span><br><span class="line">git <span class="built_in">clone</span> git@github.com:User/progit.git</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h1><h2 id="查看当前工作目录的远程仓库信息"><a href="#查看当前工作目录的远程仓库信息" class="headerlink" title="查看当前工作目录的远程仓库信息"></a>查看当前工作目录的远程仓库信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br><span class="line">git remote show <span class="comment">#查看当前工作目录所有的远程仓库的简写名称</span></span><br><span class="line">git remote show [name]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v</span><br><span class="line">origin  git@github.com:myoss/progit.git (fetch)</span><br><span class="line">origin  git@github.com:myoss/progit.git (push)</span><br><span class="line"></span><br><span class="line">$ git remote show</span><br><span class="line">origin</span><br><span class="line"></span><br><span class="line">$ git remote show origin</span><br><span class="line">* remote origin</span><br><span class="line">  Fetch URL: git@github.com:myoss/progit.git</span><br><span class="line">  Push  URL: git@github.com:myoss/progit.git</span><br><span class="line">  HEAD branch: master</span><br><span class="line">  Remote branches:</span><br><span class="line">    b1     tracked</span><br><span class="line">    master tracked</span><br><span class="line">  Local branches configured <span class="keyword">for</span> <span class="string">'git pull'</span>:</span><br><span class="line">    b1     merges with remote b1</span><br><span class="line">    master merges with remote master</span><br><span class="line">  Local refs configured <span class="keyword">for</span> <span class="string">'git push'</span>:</span><br><span class="line">    b1     pushes to b1     (up to date)</span><br><span class="line">    master pushes to master (up to date)</span><br></pre></td></tr></table></figure>
<h2 id="添加远程仓库"><a href="#添加远程仓库" class="headerlink" title="添加远程仓库"></a>添加远程仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add [name] [url]</span><br></pre></td></tr></table></figure>
<h2 id="修改远程仓库的url地址"><a href="#修改远程仓库的url地址" class="headerlink" title="修改远程仓库的url地址"></a>修改远程仓库的url地址</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote <span class="built_in">set</span>-url &lt;name&gt; &lt;new_url&gt;</span><br></pre></td></tr></table></figure>
<h2 id="修改某个远程仓库的简写名称"><a href="#修改某个远程仓库的简写名称" class="headerlink" title="修改某个远程仓库的简写名称"></a>修改某个远程仓库的简写名称</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote rename &lt;old_name&gt; &lt;new_name&gt;</span><br></pre></td></tr></table></figure>
<h2 id="移除某个远程仓库的配置信息，不会删除任何文件"><a href="#移除某个远程仓库的配置信息，不会删除任何文件" class="headerlink" title="移除某个远程仓库的配置信息，不会删除任何文件"></a>移除某个远程仓库的配置信息，不会删除任何文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote rm | remove &lt;name&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h1><h2 id="拉取远程仓库的更新数据"><a href="#拉取远程仓库的更新数据" class="headerlink" title="拉取远程仓库的更新数据"></a>拉取远程仓库的更新数据</h2><p>只是将远端的数据拉到本地仓库，不会自动合并到当前工作分支。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git fetch &lt;repository-name&gt; &lt;branch-name&gt; <span class="comment">#repository-name：远程仓库的简写名称</span></span><br><span class="line">git fetch origin master</span><br></pre></td></tr></table></figure>
<h2 id="拉取所有远程仓库"><a href="#拉取所有远程仓库" class="headerlink" title="拉取所有远程仓库"></a>拉取所有远程仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch --all</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h1><h2 id="获取远程仓库的更新数据，再自动合并到本地仓库中的当前分支"><a href="#获取远程仓库的更新数据，再自动合并到本地仓库中的当前分支" class="headerlink" title="获取远程仓库的更新数据，再自动合并到本地仓库中的当前分支"></a>获取远程仓库的更新数据，再自动合并到本地仓库中的当前分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git pull &lt;repository-name&gt; &lt;repository-branch-name&gt;</span><br><span class="line">git pull origin master</span><br></pre></td></tr></table></figure>
<p>相当于做了以下2步操作，如果有冲突，将会合并失败</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin master</span><br><span class="line">git merge origin/master</span><br></pre></td></tr></table></figure>
<h2 id="获取远程仓库的更新数据，再自动合并到本地仓库中的其它分支"><a href="#获取远程仓库的更新数据，再自动合并到本地仓库中的其它分支" class="headerlink" title="获取远程仓库的更新数据，再自动合并到本地仓库中的其它分支"></a>获取远程仓库的更新数据，再自动合并到本地仓库中的其它分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git pull &lt;repository-name&gt; &lt;repository-branch-name&gt;:&lt;<span class="built_in">local</span>-branch-name&gt;</span><br><span class="line">git pull origin master:dev <span class="comment">#将远程仓库的master分支的更新，合并到本地的dev分支</span></span><br></pre></td></tr></table></figure>
<h2 id="获取远程仓库上所有的tag"><a href="#获取远程仓库上所有的tag" class="headerlink" title="获取远程仓库上所有的tag"></a>获取远程仓库上所有的tag</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git pull &lt;repository-name&gt; --tags</span><br><span class="line">git pull origin --tags</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h1><h2 id="将本地分支的更新，推送到远程仓库"><a href="#将本地分支的更新，推送到远程仓库" class="headerlink" title="将本地分支的更新，推送到远程仓库"></a>将本地分支的更新，推送到远程仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push &lt;repository-name&gt; &lt;<span class="built_in">local</span>-branch-name&gt;:[repository-branch-name]</span><br><span class="line">git push origin <span class="built_in">local</span>-dev:remote-dev <span class="comment">#将本地的local-dev分支，推送到远程的remote-dev分支</span></span><br></pre></td></tr></table></figure>
<p>通常的操作，省略掉远程分支名<code>[repository-branch-name]</code>，则表示将本地分支推送与之存在“追踪关系”的远程分支（通常两者同名），如果该远程分支不存在，则会被新建。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git push &lt;repository-name&gt; &lt;<span class="built_in">local</span>-branch-name&gt;</span><br><span class="line">git push origin master <span class="comment">#将本地的master分支推送到远程仓库的master分支</span></span><br><span class="line">git push origin b1 <span class="comment">#如果远程仓库不存在b1分支，则会创建b1分支</span></span><br></pre></td></tr></table></figure>
<h2 id="删除远程仓库的分支"><a href="#删除远程仓库的分支" class="headerlink" title="删除远程仓库的分支"></a>删除远程仓库的分支</h2><p>第一种方式，如果省略<code>[local-branch-name]</code>，推送一个空的本地分支到远程分支，即删除掉[远程分支]，[本地分支]不会删除</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push &lt;repository-name&gt; :&lt;repository-branch-name&gt;</span><br></pre></td></tr></table></figure>
<p>示例：删除远程仓库的<code>b3</code>分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin :b3</span><br><span class="line">To git@github.com:myoss/progit.git</span><br><span class="line"> - [deleted]         b3</span><br></pre></td></tr></table></figure>
<p>第二种方式，使用<code>--delete</code>选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push &lt;repository-name&gt; &lt;repository-branch-name&gt; --delete</span><br></pre></td></tr></table></figure>
<p>示例：删除远程仓库的<code>b2</code>分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin b2 --delete</span><br><span class="line">To git@github.com:myoss/progit.git</span><br><span class="line"> - [deleted]         b2</span><br></pre></td></tr></table></figure>
<h2 id="强制更新，覆盖的方式推送"><a href="#强制更新，覆盖的方式推送" class="headerlink" title="强制更新，覆盖的方式推送"></a>强制更新，覆盖的方式推送</h2><p><b>注意：<font color="red">此操作非常危险，因为能够将历史记录抹除掉，比如远程分支有3个提交：1，2，3，而本地分支有2个提交：4，5，并且和远程分支的提交不一样，如果强制推送了之后，远程分支上原来的3个提交就会丢失掉，变成和本地分支一样。总而言之，请三思而后行！！！</font></b></p>
<p>强制更新，会在远程仓库产生一个“非块进式”的合并（non-fast-forward merge）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push &lt;repository-name&gt; &lt;<span class="built_in">local</span>-branch-name&gt; -f | --force</span><br></pre></td></tr></table></figure>
<p>操作注意：</p>
<ol>
<li>在github中，通常会关闭对<code>master</code>分支的强制更新，关闭保护的步骤：在项目的<code>Settings</code>下的<code>Branches</code>中，找到<code>Protected branches</code>，将其关闭掉即可。</li>
<li>在gitlab中，通常会关闭对<code>master</code>分支的强制更新，关闭保护的步骤：在项目的<code>Settings</code>下，找到<code>Protected branches</code>，将其关闭掉即可。</li>
</ol>
<h2 id="推送标签"><a href="#推送标签" class="headerlink" title="推送标签"></a>推送标签</h2><p>默认情况下，<code>git push</code>并不会把标签推送到远程仓库，只有通过显式命令才能推送标签到远程仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push &lt;repository-name&gt; &lt;<span class="built_in">local</span>-tag-name&gt;</span><br></pre></td></tr></table></figure>
<h2 id="推送所有的标签"><a href="#推送所有的标签" class="headerlink" title="推送所有的标签"></a>推送所有的标签</h2><p>将本地所有的标签，推送到远程仓库（远程仓库没有的标签），注意是否有权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push &lt;repository-name&gt; --tags</span><br></pre></td></tr></table></figure>
<h2 id="推送本地所有的分支，不包含标签"><a href="#推送本地所有的分支，不包含标签" class="headerlink" title="推送本地所有的分支，不包含标签"></a>推送本地所有的分支，不包含标签</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push &lt;repository-name&gt; --all</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h1><h2 id="初始化本地仓库"><a href="#初始化本地仓库" class="headerlink" title="初始化本地仓库"></a>初始化本地仓库</h2><p>先在本地创建一个空目录，然后在创建的目录里使用<code>git init</code>初始化仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir my-work</span><br><span class="line">$ <span class="built_in">cd</span> my-work</span><br><span class="line">$ git init</span><br></pre></td></tr></table></figure>
<p>一步操作，仓库空目录，并初始化仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init my-work</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h1><h2 id="添加未跟踪的文件"><a href="#添加未跟踪的文件" class="headerlink" title="添加未跟踪的文件"></a>添加未跟踪的文件</h2><p>使用<code>git add &lt;文件名1&gt;[,&lt;文件名2&gt;,&lt;文件名3&gt;]</code>添加未跟踪的文件，这不会提交到本地仓库中。如需要提交，使用<code>git commit -m &quot;提交的注释&quot;</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s test.txt <span class="comment">#查看精简状态，显示有一个未跟踪的文件</span></span><br><span class="line">?? test.txt</span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#查看状态，现在有一个未跟踪的test.txt文件</span></span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        test.txt</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use <span class="string">"git add"</span> to track)</span><br><span class="line"></span><br><span class="line">$ git add test.txt <span class="comment">#添加未跟踪的test.txt文件</span></span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#再次查看状态，test.txt文件已经放到暂存区了</span></span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        new file:   test.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ git status -s <span class="comment">#查看精简状态，显示有一个添加的文件</span></span><br><span class="line">A  test.txt</span><br><span class="line"></span><br><span class="line">$ git commit -m<span class="string">"添加文件：test.txt"</span> <span class="comment">#提交到本地git仓库中</span></span><br><span class="line">[master d14545d] 添加文件：test.txt</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 test.txt</span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#再次查看状态，刚才添加的文件已经提交，并且领先远程仓库一个提交</span></span><br><span class="line">On branch master</span><br><span class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 1 commit.</span><br><span class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line">nothing to commit, working directory clean</span><br><span class="line"></span><br><span class="line">$ git status -s <span class="comment">#查看精简状态，无内容</span></span><br></pre></td></tr></table></figure>
<h2 id="添加已经追踪的文件"><a href="#添加已经追踪的文件" class="headerlink" title="添加已经追踪的文件"></a>添加已经追踪的文件</h2><p>同样的使用<code>git add &lt;文件名1&gt;[,&lt;文件名2&gt;,&lt;文件名3&gt;]</code>添加已跟踪的文件，这不会提交到本地仓库中。如需要提交，使用<code>git commit -m &quot;提交的注释&quot;</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">$ git status <span class="comment">#查看状态，有一个文件的内容修改了</span></span><br><span class="line">On branch master</span><br><span class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 1 commit.</span><br><span class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   test.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br><span class="line"></span><br><span class="line">$ git status -s <span class="comment">#查看精简状态，显示有一个修改的文件，`M`字符的位置在第二列，颜色为红色</span></span><br><span class="line"> M test.txt</span><br><span class="line"></span><br><span class="line">$ git add test.txt <span class="comment">#将test.txt文件修改的内容放到暂存区</span></span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#再次查看状态，test.txt文件修改的内容已经放到暂存区了</span></span><br><span class="line">On branch master</span><br><span class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 1 commit.</span><br><span class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   test.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ git status -s <span class="comment">#查看精简状态，显示有一个修改的文件，`M`字符的位置在第一列，颜色为绿色</span></span><br><span class="line">M  test.txt</span><br><span class="line"></span><br><span class="line">$ git commit -m<span class="string">"new update for test.txt"</span> <span class="comment">#提交到本地git仓库中</span></span><br><span class="line">[master 3a0f2d3] new update <span class="keyword">for</span> test.txt</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#再次查看状态，刚才添加的文件已经提交，并且领先远程仓库两个提交</span></span><br><span class="line">On branch master</span><br><span class="line">Your branch is ahead of <span class="string">'origin/master'</span> by 2 commits.</span><br><span class="line">  (use <span class="string">"git push"</span> to publish your <span class="built_in">local</span> commits)</span><br><span class="line">nothing to commit, working directory clean</span><br><span class="line"></span><br><span class="line">$ git status -s <span class="comment">#查看精简状态，无内容</span></span><br></pre></td></tr></table></figure>
<h2 id="巧用git-add，快速回退测试代码"><a href="#巧用git-add，快速回退测试代码" class="headerlink" title="巧用git add，快速回退测试代码"></a>巧用<code>git add</code>，快速回退测试代码</h2><p>假设已经开发好了某个功能，这时候用<code>git add</code>添加，但不做<code>git commit</code></p>
<blockquote>
<p>场景一：这时候我再去添加些测试代码测试，比如<code>System.out.println</code>这种代码，测试下来发现我刚才<code>git add</code>的代码都是OK的，这时候我用<code>git checkout</code>就能快速安全的删掉刚才添加的测试代码。<br>场景二：我发现刚才<code>git add</code>的代码不够完美，修改完成之后，再次用<code>git add</code>添加，就会合并到上一次<code>git add</code>的代码中了，然后做为一次<code>git commit</code>。</p>
</blockquote>
<hr>
<h1 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h1><h2 id="查看当前分支的文件变化状态"><a href="#查看当前分支的文件变化状态" class="headerlink" title="查看当前分支的文件变化状态"></a>查看当前分支的文件变化状态</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure>
<h2 id="查看精简状态"><a href="#查看精简状态" class="headerlink" title="查看精简状态"></a>查看精简状态</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status -s</span><br></pre></td></tr></table></figure>
<p><code>M</code>字符的位置在第二列，颜色为红色，表示工作区当前的文件与暂存区的文件相比有改动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s</span><br><span class="line"> M  test.txt</span><br></pre></td></tr></table></figure>
<p><code>M</code>字符的位置在第一列，颜色为绿色，表示版本库中的文件与暂存区中的文件相比有改动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s</span><br><span class="line">M  test.txt</span><br></pre></td></tr></table></figure>
<p>同时显示所在的分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git status -sb</span><br><span class="line"><span class="comment">## master...origin/master [ahead 2]</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-cherry"><a href="#git-cherry" class="headerlink" title="git cherry"></a>git cherry</h1><h2 id="查看本地分支领先远程仓库的提交"><a href="#查看本地分支领先远程仓库的提交" class="headerlink" title="查看本地分支领先远程仓库的提交"></a>查看本地分支领先远程仓库的提交</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git cherry</span><br><span class="line">+ d14545d3754498d664caea7672761305b59dd162</span><br><span class="line">+ 3a0f2d351733ed9d234e6f0498bc533c11048686</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h1><h2 id="比较工作区和暂存区"><a href="#比较工作区和暂存区" class="headerlink" title="比较工作区和暂存区"></a>比较工作区和暂存区</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff</span><br></pre></td></tr></table></figure>
<h2 id="逐词比较，而非默认的逐行比较"><a href="#逐词比较，而非默认的逐行比较" class="headerlink" title="逐词比较，而非默认的逐行比较"></a>逐词比较，而非默认的逐行比较</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --word-diff</span><br></pre></td></tr></table></figure>
<h2 id="比较暂存区和HEAD（本地git仓库）"><a href="#比较暂存区和HEAD（本地git仓库）" class="headerlink" title="比较暂存区和HEAD（本地git仓库）"></a>比较暂存区和<code>HEAD</code>（本地git仓库）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git diff --cached</span><br><span class="line">git diff --staged</span><br></pre></td></tr></table></figure>
<h2 id="比较工作区和HEAD（本地git仓库）"><a href="#比较工作区和HEAD（本地git仓库）" class="headerlink" title="比较工作区和HEAD（本地git仓库）"></a>比较工作区和<code>HEAD</code>（本地git仓库）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff HEAD</span><br></pre></td></tr></table></figure>
<h2 id="比较两个提交"><a href="#比较两个提交" class="headerlink" title="比较两个提交"></a>比较两个提交</h2><p>用<code>SHA-1</code>值（前7位即可）比较两次提交之间的差异。注意顺序不一样，查看到的结果也会不一样。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff &lt;<span class="variable">$id1</span>&gt; &lt;<span class="variable">$id2</span>&gt;</span><br></pre></td></tr></table></figure>
<h2 id="比较两个分支"><a href="#比较两个分支" class="headerlink" title="比较两个分支"></a>比较两个分支</h2><p>只比较已经提交的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff &lt;branch1&gt; &lt;branch2&gt;</span><br></pre></td></tr></table></figure>
<h2 id="比较两个远程分支"><a href="#比较两个远程分支" class="headerlink" title="比较两个远程分支"></a>比较两个远程分支</h2><p>注意：可能需要先执行<code>git fetch</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff pro/master pro/b1</span><br></pre></td></tr></table></figure>
<h2 id="当前分支比较另外一个分支"><a href="#当前分支比较另外一个分支" class="headerlink" title="当前分支比较另外一个分支"></a>当前分支比较另外一个分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff &lt;branch2&gt; [current-branch]</span><br></pre></td></tr></table></figure>
<h2 id="比较之后，显示简要的增改行数统计"><a href="#比较之后，显示简要的增改行数统计" class="headerlink" title="比较之后，显示简要的增改行数统计"></a>比较之后，显示简要的增改行数统计</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --<span class="built_in">stat</span></span><br><span class="line"> test.txt | 3 ++-</span><br><span class="line"> 1 file changed, 2 insertions(+), 1 deletion(-)</span><br></pre></td></tr></table></figure>
<h2 id="比较二进制文件差异"><a href="#比较二进制文件差异" class="headerlink" title="比较二进制文件差异"></a>比较二进制文件差异</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --binary</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h1><h2 id="储藏当前工作区和暂存区修改的内容"><a href="#储藏当前工作区和暂存区修改的内容" class="headerlink" title="储藏当前工作区和暂存区修改的内容"></a>储藏当前工作区和暂存区修改的内容</h2><p>使用场景，当需要紧急处理一个bug时，工作区内容又没有完成，不适合提交，将未完成的修改保存到一个栈上，而你可以在任何时候重新应用这些改动。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git stash</span><br><span class="line">Saved working directory and index state WIP on master: ae1ffd1 merge ...</span><br><span class="line">HEAD is now at ae1ffd1 merge ...</span><br></pre></td></tr></table></figure>
<h2 id="储藏的完整命令"><a href="#储藏的完整命令" class="headerlink" title="储藏的完整命令"></a>储藏的完整命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash [save [--patch] [-k|--[no-]keep-index] [-q|--quiet] [-u|--include-untracked] [-a|--all] [&lt;message&gt;]</span><br></pre></td></tr></table></figure>
<p>如果需要在保存储藏的时候指定说明</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash save &lt;message&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git stash save <span class="string">"9 modify"</span></span><br><span class="line">Saved working directory and index state On master: 9 modify</span><br><span class="line">HEAD is now at ae1ffd1 merge ...</span><br></pre></td></tr></table></figure>
<p>使用参数<code>--patch</code>会显示工作区和<code>HEAD</code>的差异，通过对比差异文件的编辑决定在进度中最终要保存的工作的内容，通过编辑差异文件可以在进度中排除无关内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash --patch</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">$ git stash --patch</span><br><span class="line">diff --git a/hello.md b/hello.md</span><br><span class="line">index 70b7830..d866fb0 100644</span><br><span class="line">--- a/hello.md</span><br><span class="line">+++ b/hello.md</span><br><span class="line">@@ -10,4 +10,7 @@</span><br><span class="line"> 7 modify</span><br><span class="line"> branch b1 1 modify  branch b1 3 modify</span><br><span class="line"> branch b1 2 modify  branch b1 4 modify</span><br><span class="line">+10 modify 1</span><br><span class="line">+10 modify 2</span><br><span class="line">+10 modify 3</span><br><span class="line"> branch b2 1 modify</span><br><span class="line">Stash this hunk [y,n,q,a,d,/,e,?]? ?</span><br><span class="line">y - stash this hunk</span><br><span class="line">n - <span class="keyword">do</span> not stash this hunk</span><br><span class="line">q - quit; <span class="keyword">do</span> not stash this hunk or any of the remaining ones</span><br><span class="line">a - stash this hunk and all later hunks <span class="keyword">in</span> the file</span><br><span class="line">d - <span class="keyword">do</span> not stash this hunk or any of the later hunks <span class="keyword">in</span> the file</span><br><span class="line">g - select a hunk to go to</span><br><span class="line">/ - search <span class="keyword">for</span> a hunk matching the given regex</span><br><span class="line">j - leave this hunk undecided, see next undecided hunk</span><br><span class="line">J - leave this hunk undecided, see next hunk</span><br><span class="line">k - leave this hunk undecided, see previous undecided hunk</span><br><span class="line">K - leave this hunk undecided, see previous hunk</span><br><span class="line">s - split the current hunk into smaller hunks</span><br><span class="line">e - manually edit the current hunk</span><br><span class="line">? - <span class="built_in">print</span> <span class="built_in">help</span></span><br><span class="line">@@ -10,4 +10,7 @@</span><br><span class="line"> 7 modify</span><br><span class="line"> branch b1 1 modify  branch b1 3 modify</span><br><span class="line"> branch b1 2 modify  branch b1 4 modify</span><br><span class="line">+10 modify 1</span><br><span class="line">+10 modify 2</span><br><span class="line">+10 modify 3</span><br><span class="line"> branch b2 1 modify</span><br><span class="line">Stash this hunk [y,n,q,a,d,/,e,?]?</span><br></pre></td></tr></table></figure>
<p>使用<code>-k</code>或<code>--keep-index</code>参数，在保存进度后不将<code>暂存区</code>重置（默认会将<code>暂存区</code>和<code>工作区</code>强制重置，即命令：<code>--no-keep-index</code>的效果）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git bash -k | --keep-index</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ git status <span class="comment">#当前暂存区有一个修改的文件</span></span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ git stash -k <span class="comment">#储藏</span></span><br><span class="line">Saved working directory and index state WIP on master: ae1ffd1 merge ...</span><br><span class="line">HEAD is now at ae1ffd1 merge ...</span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#储藏之后，暂存区修改的文件没有被清空</span></span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br></pre></td></tr></table></figure>
<p>使用<code>-u|--include-untracked</code>，同时储藏未跟踪文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash save -u|--include-untracked</span><br></pre></td></tr></table></figure>
<p>使用<code>-a|--all</code>来储藏所有的改动，包括未跟踪文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash save -a|--all</span><br></pre></td></tr></table></figure>
<h2 id="查看已经保存的储藏列表"><a href="#查看已经保存的储藏列表" class="headerlink" title="查看已经保存的储藏列表"></a>查看已经保存的储藏列表</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git stash list</span><br><span class="line">stash@&#123;0&#125;: On master: 9 modify</span><br><span class="line">stash@&#123;1&#125;: WIP on master: ae1ffd1 merge ...</span><br></pre></td></tr></table></figure>
<h2 id="删除储藏"><a href="#删除储藏" class="headerlink" title="删除储藏"></a>删除储藏</h2><p>如果没有指定是第几个储藏时，默认会删除最近的一次储藏</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash drop [-q|--quiet] [&lt;stash@&#123;n&#125;&gt;]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git stash drop stash@&#123;0&#125;</span><br><span class="line">Dropped stash@&#123;0&#125; (2fa94640f400006a6ba812b3c02e8b0e91472958)</span><br></pre></td></tr></table></figure>
<h2 id="删除所有的储藏"><a href="#删除所有的储藏" class="headerlink" title="删除所有的储藏"></a>删除所有的储藏</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash clear</span><br></pre></td></tr></table></figure>
<h2 id="查看-某次-储藏修改的内容"><a href="#查看-某次-储藏修改的内容" class="headerlink" title="查看[某次]储藏修改的内容"></a>查看[某次]储藏修改的内容</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash show [&lt;stash@&#123;n&#125;&gt;]</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git stash show <span class="comment">#查看最后一次的储藏</span></span><br><span class="line"> hello.md | 2 ++</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br><span class="line"></span><br><span class="line">$ git stash show stash@&#123;1&#125; <span class="comment">#查看某次的储藏</span></span><br><span class="line"> hello.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure>
<h2 id="恢复保存的工作进度"><a href="#恢复保存的工作进度" class="headerlink" title="恢复保存的工作进度"></a>恢复保存的工作进度</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash &lt;pop | apply&gt; [--index] [-q|--quiet] [&lt;stash@&#123;n&#125;&gt;]</span><br></pre></td></tr></table></figure>
<p>如果不使用任何参数，恢复最近一次保存的工作进度</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git stash pop <span class="comment">#会从储藏列表中删除刚刚恢复的暂存</span></span><br><span class="line">git stash apply <span class="comment">#不会从储藏列表中删除刚刚恢复的暂存</span></span><br></pre></td></tr></table></figure>
<p>如果使用<code>&lt;stash@{n}&gt;</code>参数，则从该<code>&lt;stash@{n}&gt;</code>中恢复保存的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git stash pop &lt;stash@&#123;n&#125;&gt; <span class="comment">#会从储藏列表中删除该`&lt;stash@&#123;n&#125;&gt;`</span></span><br><span class="line">git stash apply &lt;stash@&#123;n&#125;&gt; <span class="comment">#不会从储藏列表中删除该`&lt;stash@&#123;n&#125;&gt;`</span></span><br></pre></td></tr></table></figure>
<p><code>--index</code>除了恢复工作区的文件外，还会恢复暂存区的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git stash pop --index</span><br><span class="line">git stash apply --index</span><br></pre></td></tr></table></figure>
<h2 id="使用储藏的内容创建新的分支"><a href="#使用储藏的内容创建新的分支" class="headerlink" title="使用储藏的内容创建新的分支"></a>使用储藏的内容创建新的分支</h2><p><code>&lt;branch-name&gt;</code>不能是已经存在的分支，并切换到创建的新分支，删除掉该储藏</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash branch &lt;branch-name&gt; [&lt;stash@&#123;n&#125;&gt;]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ git stash branch b2</span><br><span class="line">Switched to a new branch <span class="string">'b2'</span></span><br><span class="line">&lt;stdin&gt;:9: trailing whitespace.</span><br><span class="line">10 modify 2</span><br><span class="line">warning: 1 line adds whitespace errors.</span><br><span class="line">On branch b2</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Dropped refs/stash@&#123;0&#125; (3eaa4512757a598193acb1f9f0a7f91dc6c165b1)</span><br></pre></td></tr></table></figure>
<h2 id="查看储藏列表的SHA-1值"><a href="#查看储藏列表的SHA-1值" class="headerlink" title="查看储藏列表的SHA-1值"></a>查看储藏列表的<code>SHA-1</code>值</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog show refs/stash</span><br><span class="line">5afe096 refs/stash@&#123;0&#125;: On master: 9 modify</span><br><span class="line">a5c6080 refs/stash@&#123;1&#125;: WIP on master: ae1ffd1 merge ...</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h1><h2 id="仓库中的文件可能存在于这三种状态"><a href="#仓库中的文件可能存在于这三种状态" class="headerlink" title="仓库中的文件可能存在于这三种状态"></a>仓库中的文件可能存在于这三种状态</h2><ol>
<li><code>Untracked files</code> → 文件未被跟踪</li>
<li><code>Changes to be committed</code> → 文件已暂存，这是下次提交的内容</li>
<li><code>Changes not staged for commit</code> → 文件被修改，但并没有添加到暂存区。如果<code>commit</code>时没有带<code>-a</code>选项，此状态下的文件不会被提交。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch b2</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        test.txt</span><br></pre></td></tr></table></figure>
<h2 id="提交暂存区的内容"><a href="#提交暂存区的内容" class="headerlink" title="提交暂存区的内容"></a>提交暂存区的内容</h2><p>提交状态为<code>Changes to be committed</code>的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit [-m &lt;message&gt;]</span><br></pre></td></tr></table></figure>
<h2 id="提交暂存区和工作区的内容"><a href="#提交暂存区和工作区的内容" class="headerlink" title="提交暂存区和工作区的内容"></a>提交暂存区和工作区的内容</h2><p>提交状态为<code>Changes to be committed</code>和<code>Changes not staged for commit</code>的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -a [-m &lt;message&gt;]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch b2</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        test.txt</span><br><span class="line"></span><br><span class="line">$ git commit -a -m<span class="string">"commit with -a"</span></span><br><span class="line">[b2 48c54d7] commit with -a</span><br><span class="line"> 1 file changed, 3 insertions(+)</span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch b2</span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        test.txt</span><br></pre></td></tr></table></figure>
<h2 id="修改或者撤销最后一次提交"><a href="#修改或者撤销最后一次提交" class="headerlink" title="修改或者撤销最后一次提交"></a>修改或者撤销最后一次提交</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend <span class="comment">#进入交互终端模式</span></span><br><span class="line">git commit --amend -m &lt;message&gt; <span class="comment">#修改最后一次提交的注释</span></span><br></pre></td></tr></table></figure>
<p>修改最后一次提交，退出编辑器之后会直接<code>commit</code>。如果要取消，则在编辑器里清空掉提交信息再退出即可。使用场景如：修改提交信息、补正刚才修改的内容（需要先<code>git add</code>）、少添加文件了（需要先<code>git add</code>），谨慎操作！！</p>
<hr>
<h1 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a>git checkout</h1><h2 id="汇总显示（工作区和暂存区）与HEAD的差异"><a href="#汇总显示（工作区和暂存区）与HEAD的差异" class="headerlink" title="汇总显示（工作区和暂存区）与HEAD的差异"></a>汇总显示（工作区和暂存区）与<code>HEAD</code>的差异</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout [HEAD]</span><br><span class="line">git checkout HEAD</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch b2</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   README.md</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        test.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ git checkout <span class="comment">#不会统计未追踪的文件</span></span><br><span class="line">M       README.md</span><br><span class="line">M       hello.md</span><br><span class="line"></span><br><span class="line">$ git checkout HEAD</span><br><span class="line">M       README.md</span><br><span class="line">M       hello.md</span><br></pre></td></tr></table></figure>
<h2 id="撤销工作区的修改"><a href="#撤销工作区的修改" class="headerlink" title="撤销工作区的修改"></a>撤销工作区的修改</h2><p>用暂存区中的内容覆盖工作区的内容，如果使用<code>.</code>，而没有指定具体的<code>file</code>，会替换工作区所有有改动的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout [--] &lt;. | file&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch b2</span><br><span class="line">Changes to be committed:      <span class="comment">#暂存区的修改</span></span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit: <span class="comment">#工作区的修改</span></span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        test.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ git checkout hello.md <span class="comment">#使用暂存区的内容覆盖工作区的内容</span></span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#工作区没有修改的内容</span></span><br><span class="line">On branch b2</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        test.txt</span><br></pre></td></tr></table></figure>
<h2 id="用HEAD中的内容替换暂存区和工作区的修改"><a href="#用HEAD中的内容替换暂存区和工作区的修改" class="headerlink" title="用HEAD中的内容替换暂存区和工作区的修改"></a>用<code>HEAD</code>中的内容替换暂存区和工作区的修改</h2><p>取出最近的一次提交的内容，替换暂存区和工作区的修改，如果使用<code>.</code>，而没有指定具体的<code>file</code>，会替换暂存区和工作区中所有有改动的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout [--] &lt;. | file&gt;</span><br><span class="line">git checkout &lt;file&gt;</span><br><span class="line">git checkout .</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$ git status <span class="comment">#暂存区和工作区都有修改</span></span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        test.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ git checkout HEAD hello.md <span class="comment">#撤销暂存区和工作区的修改</span></span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#hello.md在暂存区和工作区没有修改</span></span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        test.txt</span><br></pre></td></tr></table></figure>
<h2 id="使用其它分支的内容替换当前分支上暂存区和工作区的内容"><a href="#使用其它分支的内容替换当前分支上暂存区和工作区的内容" class="headerlink" title="使用其它分支的内容替换当前分支上暂存区和工作区的内容"></a>使用其它分支的内容替换当前分支上暂存区和工作区的内容</h2><p><code>HEAD</code>的指向不会变化</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout &lt;branch-name&gt; [--] &lt;file&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">Administrator@Jerry-WIN8-TP MINGW64 /d/workspaces/<span class="built_in">test</span>/progit (master)</span><br><span class="line">$ git status <span class="comment">#当前分支是：master，hello.md在暂存区和工作区都有修改</span></span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        test.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Administrator@Jerry-WIN8-TP MINGW64 /d/workspaces/<span class="built_in">test</span>/progit (master)</span><br><span class="line">$ git diff b2 <span class="comment">#master分支和b2分支比较hello.md的内容</span></span><br><span class="line">diff --git a/hello.md b/hello.md</span><br><span class="line">index d866fb0..44d3964 100644</span><br><span class="line">--- a/hello.md</span><br><span class="line">+++ b/hello.md</span><br><span class="line">@@ -8,9 +8,8 @@</span><br><span class="line"> 6 modify</span><br><span class="line"> 7 modify by jerry</span><br><span class="line"> 7 modify</span><br><span class="line">+8 modify^M  <span class="comment">#master分支上的内容</span></span><br><span class="line"> branch b1 1 modify  branch b1 3 modify</span><br><span class="line"> branch b1 2 modify  branch b1 4 modify</span><br><span class="line">-10 modify 1 <span class="comment">#b2分支上的内容</span></span><br><span class="line">-10 modify 2</span><br><span class="line">-10 modify 3</span><br><span class="line">+master modify 11^M</span><br><span class="line"> branch b2 1 modify</span><br><span class="line"></span><br><span class="line">Administrator@Jerry-WIN8-TP MINGW64 /d/workspaces/<span class="built_in">test</span>/progit (master)</span><br><span class="line">$ git checkout b2 hello.md <span class="comment">#用b2分支上hello.md的内容替换暂存区和工作区的内容</span></span><br><span class="line"></span><br><span class="line">Administrator@Jerry-WIN8-TP MINGW64 /d/workspaces/<span class="built_in">test</span>/progit (master)</span><br><span class="line">$ git diff b2 <span class="comment">#master分支和b2分支没有差异</span></span><br><span class="line"></span><br><span class="line">Administrator@Jerry-WIN8-TP MINGW64 /d/workspaces/<span class="built_in">test</span>/progit (master)</span><br><span class="line">$ git status <span class="comment">#暂存区还是有hello.md这个文件</span></span><br><span class="line">On branch master</span><br><span class="line">Your branch is up-to-date with <span class="string">'origin/master'</span>.</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   hello.md</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        test.txt</span><br><span class="line"></span><br><span class="line">Administrator@Jerry-WIN8-TP MINGW64 /d/workspaces/<span class="built_in">test</span>/progit (master)</span><br><span class="line">$ cat hello.md <span class="comment">#查看master分支上hello.md文件内容，发现b2分支的内容替换过来了</span></span><br><span class="line">6 modify</span><br><span class="line">1 add</span><br><span class="line">2 modify</span><br><span class="line">3 modify</span><br><span class="line">4 mdofiy --&gt; amend 3</span><br><span class="line">5 modify</span><br><span class="line">6 modify by jerry</span><br><span class="line">6 modify</span><br><span class="line">7 modify by jerry</span><br><span class="line">7 modify</span><br><span class="line">branch b1 1 modify  branch b1 3 modify</span><br><span class="line">branch b1 2 modify  branch b1 4 modify</span><br><span class="line">10 modify 1 <span class="comment">#这3行是b2分支上添加的内容，现在出现在master分支上了</span></span><br><span class="line">10 modify 2</span><br><span class="line">10 modify 3</span><br><span class="line">branch b2 1 modify</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h1><h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><p>将当前的分支重设（reset）到指定的<code>&lt;commit&gt;</code>或者<code>HEAD</code>（如果不显示指定<code>commit</code>，默认是<code>HEAD</code>，即最新的一次提交），并且根据<code>选项</code>有可能更新<code>暂存区</code>和<code>工作区</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset [--mixed | --soft | --hard | --merge | --keep] [-q] [&lt;commit&gt;]</span><br></pre></td></tr></table></figure>
<p><code>--soft</code>：<code>暂存区</code>和<code>工作区</code>中的内容不作任何改变，仅仅把<code>HEAD</code>指向<code>&lt;commit&gt;</code>。这个模式的效果是，执行完毕后，自从<code>&lt;commit&gt;</code>以来的所有改变都会显示为<code>Changes to be committed</code>（<code>git status</code>） 。<b><font color="red">不会丢失任何改动</font></b></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git reset --soft &lt;commit&gt;</span><br><span class="line"></span><br><span class="line">git reset --soft HEAD^ <span class="comment">#HEAD^代表版本库中的最近一次提交的父提交，即重置到倒数第二次提交</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">$ git hist <span class="comment">#现在有3个提交</span></span><br><span class="line">* adba38b v3 commit</span><br><span class="line">* c7ded78 v2 commit</span><br><span class="line">* 45496b8 v1 commit</span><br><span class="line"></span><br><span class="line">$ cat readme.md <span class="comment">#文件的内容如下</span></span><br><span class="line">v1</span><br><span class="line">v2</span><br><span class="line">v3</span><br><span class="line">v4</span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#工作区有修改的内容，暂存区没有修改的内容</span></span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   readme.md</span><br><span class="line"></span><br><span class="line">$ git diff <span class="comment">#比较工作区和暂存区</span></span><br><span class="line">diff --git a/readme.md b/readme.md</span><br><span class="line">index 4b1d4d4..ed7ce12 100644</span><br><span class="line">--- a/readme.md</span><br><span class="line">+++ b/readme.md</span><br><span class="line">@@ -1,3 +1,4 @@</span><br><span class="line"> v1</span><br><span class="line"> v2</span><br><span class="line"> v3</span><br><span class="line">+v4 <span class="comment">#工作区修改的内容</span></span><br><span class="line"></span><br><span class="line">$ git reset --soft c7ded78 <span class="comment">#将分支重设到第二次提交</span></span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#查看状态，暂存区显示有待提交的内容</span></span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   readme.md</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   readme.md</span><br><span class="line"></span><br><span class="line">$ git diff <span class="comment">#比较工作区和暂存区，工作区的内容还是之前的</span></span><br><span class="line">diff --git a/readme.md b/readme.md</span><br><span class="line">index 4b1d4d4..ed7ce12 100644</span><br><span class="line">--- a/readme.md</span><br><span class="line">+++ b/readme.md</span><br><span class="line">@@ -1,3 +1,4 @@</span><br><span class="line"> v1</span><br><span class="line"> v2</span><br><span class="line"> v3</span><br><span class="line">+v4</span><br><span class="line"></span><br><span class="line">$ git diff --cached HEAD <span class="comment">#比较暂存区和HEAD的差异</span></span><br><span class="line">diff --git a/readme.md b/readme.md</span><br><span class="line">index 2139d8b..4b1d4d4 100644</span><br><span class="line">--- a/readme.md</span><br><span class="line">+++ b/readme.md</span><br><span class="line">@@ -1,2 +1,3 @@</span><br><span class="line"> v1</span><br><span class="line"> v2</span><br><span class="line">+v3 <span class="comment">#这一行就是第三次提交的内容</span></span><br><span class="line"></span><br><span class="line">$ git hist <span class="comment">#查看提交日志</span></span><br><span class="line">* c7ded78 v2 commit</span><br><span class="line">* 45496b8 v1 commit</span><br><span class="line"></span><br><span class="line">$ cat readme.md</span><br><span class="line">v1</span><br><span class="line">v2</span><br><span class="line">v3</span><br><span class="line">v4</span><br></pre></td></tr></table></figure>
<p><code>--hard</code>：重设<code>暂存区</code>和<code>工作区</code>，自从<code>&lt;commit&gt;</code>以来在<code>工作区</code>中的任何改变都被丢弃，并把<code>HEAD</code>指向<code>&lt;commit&gt;</code>。<b><font color="red">会丢失改动</font></b></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard &lt;commit&gt;</span><br><span class="line"></span><br><span class="line">git reset --hard HEAD^ <span class="comment">#HEAD^代表版本库中的最近一次提交的父提交，即丢弃掉最近的一次提交</span></span><br><span class="line"></span><br><span class="line">git reset --hard origin/master <span class="comment">#丢弃在本地的所有改动与提交，用远程仓库的提交覆盖</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">$ git hist <span class="comment">#现在有3个提交</span></span><br><span class="line">* adba38b v3 commit</span><br><span class="line">* c7ded78 v2 commit</span><br><span class="line">* 45496b8 v1 commit</span><br><span class="line"></span><br><span class="line">$ cat readme.md <span class="comment">#文件的内容如下</span></span><br><span class="line">v1</span><br><span class="line">v2</span><br><span class="line">v3</span><br><span class="line">v4</span><br><span class="line">v5</span><br><span class="line"></span><br><span class="line">$ git diff <span class="comment">#比较工作区和暂存区</span></span><br><span class="line">diff --git a/readme.md b/readme.md</span><br><span class="line">index ed7ce12..4d73d61 100644</span><br><span class="line">--- a/readme.md</span><br><span class="line">+++ b/readme.md</span><br><span class="line">@@ -2,3 +2,4 @@ v1</span><br><span class="line"> v2</span><br><span class="line"> v3</span><br><span class="line"> v4</span><br><span class="line">+v5 <span class="comment">#工作区修改的内容</span></span><br><span class="line"></span><br><span class="line">$ git diff --cached HEAD <span class="comment">#比较暂存区和HEAD的差异</span></span><br><span class="line">diff --git a/readme.md b/readme.md</span><br><span class="line">index 4b1d4d4..ed7ce12 100644</span><br><span class="line">--- a/readme.md</span><br><span class="line">+++ b/readme.md</span><br><span class="line">@@ -1,3 +1,4 @@</span><br><span class="line"> v1</span><br><span class="line"> v2</span><br><span class="line"> v3</span><br><span class="line">+v4 <span class="comment">#暂存区修改的内容</span></span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#查看状态，工作区和暂存区显示有修改的内容</span></span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   readme.md</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   readme.md</span><br><span class="line"></span><br><span class="line">$ git reset --hard c7ded78 <span class="comment">#将分支重设到第二次提交</span></span><br><span class="line">HEAD is now at c7ded78 v2 commit</span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#查看状态，工作区和暂存区显示没有修改的内容</span></span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working directory clean</span><br><span class="line"></span><br><span class="line">$ git hist <span class="comment">#查看提交日志</span></span><br><span class="line">* c7ded78 v2 commit</span><br><span class="line">* 45496b8 v1 commit</span><br><span class="line"></span><br><span class="line">$ cat readme.md <span class="comment">#查看文件的内容，重设前的工作区和暂存区修改的内容已经丢失掉了</span></span><br><span class="line">v1</span><br><span class="line">v2</span><br></pre></td></tr></table></figure>
<p><code>--mixed</code>：仅重设<code>暂存区</code>，但是不重设<code>工作区</code>。这个模式是默认模式，即当不显示告知<code>git reset</code>模式时，会使用<code>--mixed</code>模式。这个模式的效果是，<code>工作区</code>中文件的修改都会被保留，不会丢弃，但是也不会被标记成<code>Changes to be committed</code>。<b><font color="red">不会丢失任何改动</font></b></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset &lt;commit&gt;</span><br><span class="line">git reset --mixed &lt;commit&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">$ git hist <span class="comment">#现在有3个提交</span></span><br><span class="line">* adba38b v3 commit</span><br><span class="line">* c7ded78 v2 commit</span><br><span class="line">* 45496b8 v1 commit</span><br><span class="line"></span><br><span class="line">$ cat readme.md <span class="comment">#文件的内容如下</span></span><br><span class="line">v1</span><br><span class="line">v2</span><br><span class="line">v3</span><br><span class="line">v4</span><br><span class="line">v5</span><br><span class="line"></span><br><span class="line">$ git diff <span class="comment">#比较工作区和暂存区</span></span><br><span class="line">diff --git a/readme.md b/readme.md</span><br><span class="line">index ed7ce12..4d73d61 100644</span><br><span class="line">--- a/readme.md</span><br><span class="line">+++ b/readme.md</span><br><span class="line">@@ -2,3 +2,4 @@ v1</span><br><span class="line"> v2</span><br><span class="line"> v3</span><br><span class="line"> v4</span><br><span class="line">+v5 <span class="comment">#工作区修改的内容</span></span><br><span class="line"></span><br><span class="line">$ git diff --cached HEAD <span class="comment">#比较暂存区和HEAD的差异</span></span><br><span class="line">diff --git a/readme.md b/readme.md</span><br><span class="line">index 4b1d4d4..ed7ce12 100644</span><br><span class="line">--- a/readme.md</span><br><span class="line">+++ b/readme.md</span><br><span class="line">@@ -1,3 +1,4 @@</span><br><span class="line"> v1</span><br><span class="line"> v2</span><br><span class="line"> v3</span><br><span class="line">+v4 <span class="comment">#暂存区修改的内容</span></span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#查看状态，工作区和暂存区显示有修改的内容</span></span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   readme.md</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   readme.md</span><br><span class="line"></span><br><span class="line">$ git reset --mixed c7ded78 <span class="comment">#将分支重设到第二次提交</span></span><br><span class="line">Unstaged changes after reset:</span><br><span class="line">M       readme.md</span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#查看状态，暂存区没有待提交的内容</span></span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   readme.md</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br><span class="line"></span><br><span class="line">$ git diff <span class="comment">#比较工作区和暂存区</span></span><br><span class="line">diff --git a/readme.md b/readme.md</span><br><span class="line">index 2139d8b..4d73d61 100644</span><br><span class="line">--- a/readme.md</span><br><span class="line">+++ b/readme.md</span><br><span class="line">@@ -1,2 +1,5 @@</span><br><span class="line"> v1</span><br><span class="line"> v2</span><br><span class="line">+v3 <span class="comment">#重设前HEAD的内容，出现在工作区了</span></span><br><span class="line">+v4 <span class="comment">#重设前暂存区的内容，出现在工作区了</span></span><br><span class="line">+v5 <span class="comment">#重设前工作区的内容</span></span><br><span class="line"></span><br><span class="line">$ git hist <span class="comment">#查看提交日志</span></span><br><span class="line">* c7ded78 v2 commit</span><br><span class="line">* 45496b8 v1 commit</span><br><span class="line"></span><br><span class="line">$ cat readme.md <span class="comment">#查看文件的内容，重设前的工作区和暂存区修改的内容没有丢失掉了</span></span><br><span class="line">v1</span><br><span class="line">v2</span><br><span class="line">v3</span><br><span class="line">v4</span><br><span class="line">v5</span><br></pre></td></tr></table></figure>
<h2 id="重置暂存区"><a href="#重置暂存区" class="headerlink" title="重置暂存区"></a>重置暂存区</h2><p>将暂存区添加的内容，回退到工作区，改动不会丢失。如果指定了文件<code>&lt;file&gt;</code>，则只处理此文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD</span><br><span class="line">git reset --</span><br><span class="line">git reset</span><br><span class="line"></span><br><span class="line">git reset HEAD &lt;file&gt;</span><br><span class="line">git reset -- &lt;file&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">$ git hist <span class="comment">#现在有3个提交</span></span><br><span class="line">* adba38b v3 commit</span><br><span class="line">* c7ded78 v2 commit</span><br><span class="line">* 45496b8 v1 commit</span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#查看状态，暂存区显示有修改的内容</span></span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        modified:   readme.md</span><br><span class="line">        new file:   test.md</span><br><span class="line"></span><br><span class="line">$ git diff</span><br><span class="line"></span><br><span class="line">$ git diff --cached <span class="comment">#比较工作区和暂存区</span></span><br><span class="line">diff --git a/readme.md b/readme.md</span><br><span class="line">index 4b1d4d4..0d6160d 100644</span><br><span class="line">--- a/readme.md</span><br><span class="line">+++ b/readme.md</span><br><span class="line">@@ -1,3 +1,4 @@</span><br><span class="line"> v1</span><br><span class="line"> v2</span><br><span class="line"> v3</span><br><span class="line">+v4</span><br><span class="line">diff --git a/test.md b/test.md</span><br><span class="line">new file mode 100644</span><br><span class="line">index 0000000..e69de29</span><br><span class="line"></span><br><span class="line">$ git reset HEAD <span class="comment">#重置暂存区</span></span><br><span class="line">Unstaged changes after reset:</span><br><span class="line">M       readme.md</span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#查看状态，刚才在暂存区待提交的内容已经退回到工作区</span></span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">"git checkout -- &lt;file&gt;..."</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">        modified:   readme.md</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        test.md</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">"git add"</span> and/or <span class="string">"git commit -a"</span>)</span><br><span class="line"></span><br><span class="line">$ git diff</span><br><span class="line">diff --git a/readme.md b/readme.md</span><br><span class="line">index 4b1d4d4..0d6160d 100644</span><br><span class="line">--- a/readme.md</span><br><span class="line">+++ b/readme.md</span><br><span class="line">@@ -1,3 +1,4 @@</span><br><span class="line"> v1</span><br><span class="line"> v2</span><br><span class="line"> v3</span><br><span class="line">+v4</span><br></pre></td></tr></table></figure>
<h2 id="实战：两个提交压缩为一个"><a href="#实战：两个提交压缩为一个" class="headerlink" title="实战：两个提交压缩为一个"></a>实战：两个提交压缩为一个</h2><p>使用<code>--soft</code>参数调用重置命令，回到最近两次提交之前</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --soft HEAD^^</span><br></pre></td></tr></table></figure>
<p>查看版本状态和最新日志，如果需要修改就进行修改</p>
<p>执行提交操作，即完成最新两个提交压缩为一个</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m<span class="string">"Message"</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a>git rebase</h1><h2 id="交互式变基操作"><a href="#交互式变基操作" class="headerlink" title="交互式变基操作"></a>交互式变基操作</h2><p><code>&lt;since&gt;</code>和<code>&lt;till&gt;</code>代表历史提交的<code>SHA-1</code>值，变基的范围是从<code>&lt;since&gt;</code>（不包括<code>&lt;since&gt;</code>）的下一个提交到<code>&lt;till&gt;</code>，如果<code>&lt;till&gt;</code>没有给出，则变基的范围到当前<code>HEAD</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i &lt;since&gt; [&lt;till&gt;]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ git hist <span class="comment">#现在有5个提交</span></span><br><span class="line">* 1c1e018 v5 commit</span><br><span class="line">* 45d9dfb v4 commit</span><br><span class="line">* adba38b v3 commit</span><br><span class="line">* c7ded78 v2 commit</span><br><span class="line">* 45496b8 v1 commit</span><br><span class="line"></span><br><span class="line">$ git rebase -i c7ded78 45d9dfb <span class="comment">#变基范围为第三个提交到第四个提交</span></span><br><span class="line"><span class="comment">#稍等一会儿，就会弹出交互式界面，如果范围比较长需要等待的时间会久一些，如下：</span></span><br><span class="line"></span><br><span class="line">pick adba38b v3 commit</span><br><span class="line">pick 45d9dfb v4 commit</span><br><span class="line"></span><br><span class="line"><span class="comment"># Rebase c7ded78..45d9dfb onto c7ded78 (2 command(s)) #能够操作的提交只有2个</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Commands:</span></span><br><span class="line"><span class="comment"># p, pick = use commit</span></span><br><span class="line"><span class="comment"># r, reword = use commit, but edit the commit message</span></span><br><span class="line"><span class="comment"># e, edit = use commit, but stop for amending</span></span><br><span class="line"><span class="comment"># s, squash = use commit, but meld into previous commit</span></span><br><span class="line"><span class="comment"># f, fixup = like "squash", but discard this commit's log message</span></span><br><span class="line"><span class="comment"># x, exec = run command (the rest of the line) using shell</span></span><br><span class="line"><span class="comment"># d, drop = remove commit</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># These lines can be re-ordered; they are executed from top to bottom.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If you remove a line here THAT COMMIT WILL BE LOST.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># However, if you remove everything, the rebase will be aborted.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Note that empty commits are commented out</span></span><br></pre></td></tr></table></figure>
<ol>
<li>开头的几行由上到下依次对应历史的提交，如果删除掉这些提交保存退出交互式模式，则不执行变基动作</li>
<li><code>pick</code>，或简写<code>p</code>，默认的动作，即应用此提交</li>
<li><code>reword</code>，或简写<code>r</code>。在变基时会应用此提交，但是在提交的时候允许用户修改提交说明</li>
<li><code>edit</code>，或简写<code>e</code>。在变基时会应用此提交，但是在应用后你可以进行内容编辑，需要使用<code>git commit --amend</code>执行提交，以便对提交进行修补。当用户执行<code>git commit --amend</code>完成提交后，还需要执行<code>git rebase --continue</code>继续变基操作。用户在变基暂停状态下可以执行多次提交，从而实现把一个提交分解为多个提交</li>
<li><code>squash</code>，简写<code>s</code>。该提交会与前面的提交压缩为一个</li>
<li><code>fixup</code>，简写<code>f</code>。类似动作<code>squash</code>，但是提交的提交说明被丢弃</li>
<li>可以通过修改变基任务文件中各个提交的先后顺序，进而改变最终变基后提交的先后顺序</li>
<li>可以通过改变变基任务文件，删除包含相应提交的行，这样该提交就不会被应用，进而在变基后的提交中被删除</li>
</ol>
<p>在变基遇到冲突而暂停的情况下，先完成冲突解决（添加到暂存区，不提交），然后在恢复变基操作的时候使用该命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --<span class="built_in">continue</span></span><br></pre></td></tr></table></figure>
<p>在变基遇到冲突而暂停的情况下，跳过当前提交的时候使用，谨慎用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase –abort</span><br></pre></td></tr></table></figure>
<p>在变基遇到冲突而暂停的情况下，终止变基操作，回到之前的分支时候使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase –skip</span><br></pre></td></tr></table></figure>
<h2 id="将其它分支上的修改应用到当前分支"><a href="#将其它分支上的修改应用到当前分支" class="headerlink" title="将其它分支上的修改应用到当前分支"></a>将其它分支上的修改应用到当前分支</h2><p>将远程仓库的更新，合并到当前分支上产生一个新的提交，如果工作区或者暂存区有未提交的更改，变基动作不会执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin master</span><br><span class="line">git rebase origin/master</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h1><h2 id="显示所有分支信息"><a href="#显示所有分支信息" class="headerlink" title="显示所有分支信息"></a>显示所有分支信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br><span class="line">git branch -v</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git branch <span class="comment">#显示所有分支名称</span></span><br><span class="line">  b1</span><br><span class="line">* master</span><br><span class="line"></span><br><span class="line">$ git branch -v <span class="comment">#显示所有分支名称，同时显示最后的提交注释，*：代表当前分支</span></span><br><span class="line">  b1     45d9dfb v4 commit</span><br><span class="line">* master 1c1e018 v5 commit</span><br></pre></td></tr></table></figure>
<h2 id="创建新分支"><a href="#创建新分支" class="headerlink" title="创建新分支"></a>创建新分支</h2><p>创建新分支之后，不会自动切换到新分支上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch &lt;new-branch-name&gt;</span><br></pre></td></tr></table></figure>
<p>基于<code>&lt;commit&gt;</code>创建新分支，不会自动切换到新分支上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch &lt;new-branch-name&gt; &lt;commit&gt;</span><br></pre></td></tr></table></figure>
<p>使用<code>git checkout</code>创建新分支，并自动切换到这个分支上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;new-branch-name&gt;</span><br></pre></td></tr></table></figure>
<p>使用<code>git checkout</code>基于标签创建新分支，并自动切换到这个分支上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;new-branch-name&gt; &lt;tag-name&gt;</span><br></pre></td></tr></table></figure>
<p>使用<code>git checkout</code>基于标签创建新分支，没有指定<code>&lt;new-branch-name&gt;</code>，<code>HEAD</code>会进入到游离指针状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;tag-name&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout v5</span><br><span class="line">Note: checking out <span class="string">'v5'</span>.</span><br><span class="line"></span><br><span class="line">You are <span class="keyword">in</span> <span class="string">'detached HEAD'</span> state. You can look around, make experimental</span><br><span class="line">changes and commit them, and you can discard any commits you make <span class="keyword">in</span> this</span><br><span class="line">state without impacting any branches by performing another checkout.</span><br><span class="line"></span><br><span class="line">If you want to create a new branch to retain commits you create, you may</span><br><span class="line"><span class="keyword">do</span> so (now or later) by using -b with the checkout <span class="built_in">command</span> again. Example:</span><br><span class="line"></span><br><span class="line">  git checkout -b &lt;new-branch-name&gt;</span><br><span class="line"></span><br><span class="line">HEAD is now at 1c1e018... v5 commit</span><br></pre></td></tr></table></figure>
<p>退出游离指针状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout &lt;branch-name&gt; <span class="comment">#切换到其它分支</span></span><br><span class="line">git checkout -b &lt;new-branch-name&gt; <span class="comment">#将游离指针状态，切换到创建的新分支上</span></span><br></pre></td></tr></table></figure>
<p>创建新分支来跟踪远程分支，并自动切换到这个分支上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;new-branch-name&gt; &lt;remote-name&gt;/&lt;remote-branch-name&gt;</span><br></pre></td></tr></table></figure>
<h2 id="重命名分支"><a href="#重命名分支" class="headerlink" title="重命名分支"></a>重命名分支</h2><p>如果<code>&lt;new-branch-name&gt;</code>已经存在，重命名动作停止</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -m &lt;old-branch-name&gt; &lt;new-branch-name&gt;</span><br></pre></td></tr></table></figure>
<p>如果<code>&lt;new-branch-name&gt;</code>已经存在，重命名动作继续，请谨慎操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -M &lt;old-branch-name&gt; &lt;new-branch-name&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -v</span><br><span class="line">  b1     1c1e018 v5 commit</span><br><span class="line">  b2     1c1e018 v5 commit</span><br><span class="line">* master 1c1e018 v5 commit</span><br><span class="line"></span><br><span class="line">$ git branch -m b2 b1</span><br><span class="line">fatal: A branch named <span class="string">'b1'</span> already exists.</span><br><span class="line"></span><br><span class="line">$ git branch -M b2 b1</span><br><span class="line"></span><br><span class="line">$ git branch -v</span><br><span class="line">  b1     1c1e018 v5 commit</span><br><span class="line">* master 1c1e018 v5 commit</span><br></pre></td></tr></table></figure>
<h2 id="删除分支"><a href="#删除分支" class="headerlink" title="删除分支"></a>删除分支</h2><p>如果分支上存在未被合并的提交，删除动作停止</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>
<p>如果分支上存在未被合并的提交，删除动作继续，请谨慎操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -D &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -v</span><br><span class="line">  b1     2e6423e v6 commit on branch b1</span><br><span class="line">* master 1c1e018 v5 commit</span><br><span class="line"></span><br><span class="line">$ git branch -d b1 <span class="comment">#提示b1分支上存在没有被合并的提交</span></span><br><span class="line">error: The branch <span class="string">'b1'</span> is not fully merged.</span><br><span class="line">If you are sure you want to delete it, run <span class="string">'git branch -D b1'</span>.</span><br><span class="line"></span><br><span class="line">$ git branch -D b1</span><br><span class="line">Deleted branch b1 (was 2e6423e).</span><br><span class="line"></span><br><span class="line">$ git branch -v</span><br><span class="line">* master 1c1e018 v5 commit</span><br></pre></td></tr></table></figure>
<h2 id="查看已经合并到当前分支的分支"><a href="#查看已经合并到当前分支的分支" class="headerlink" title="查看已经合并到当前分支的分支"></a>查看已经合并到当前分支的分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch --merged</span><br></pre></td></tr></table></figure>
<h2 id="查看没有合并到当前分支的分支"><a href="#查看没有合并到当前分支的分支" class="headerlink" title="查看没有合并到当前分支的分支"></a>查看没有合并到当前分支的分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch --no-merged</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -v</span><br><span class="line">  b1     1c1e018 v5 commit</span><br><span class="line">  b2     82fa977 v6 commit</span><br><span class="line">* master 1c1e018 v5 commit</span><br><span class="line"></span><br><span class="line">$ git branch --merged</span><br><span class="line">  b1</span><br><span class="line">* master</span><br><span class="line"></span><br><span class="line">$ git branch --no-merged</span><br><span class="line">  b2</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h1><p><br><b>有未提交修改情况下，不要执行merge！遵守这条警告，防患于未然</b></p>
<h2 id="基本操作-1"><a href="#基本操作-1" class="headerlink" title="基本操作"></a>基本操作</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge [&lt;options&gt;] [&lt;commit&gt;...]</span><br></pre></td></tr></table></figure>
<ol>
<li>默认合并成功后会自动提交，使用<code>--no-commit</code>选项，则合并后的内容会放入暂存区，需要手动提交</li>
<li><code>&lt;commit&gt;</code>可以是提交的<code>SHA-1</code>值、分支、标签等</li>
<li><code>&lt;commit&gt;</code>如果是多个提交，合并成功后，当前<code>HEAD</code>是第一个<code>&lt;commit&gt;</code>的父提交，第一个<code>&lt;commit&gt;</code>是第二个<code>&lt;commit&gt;</code>的父提交，依次类推</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">$ git hist b2 <span class="comment">#b2分支上有7个提交，领先master分支2个提交</span></span><br><span class="line">* ece4a12 v7 commit</span><br><span class="line">* 82fa977 v6 commit</span><br><span class="line">* 1c1e018 v5 commit</span><br><span class="line">* 45d9dfb v4 commit</span><br><span class="line">* adba38b v3 commit</span><br><span class="line">* c7ded78 v2 commit</span><br><span class="line">* 45496b8 v1 commit</span><br><span class="line"></span><br><span class="line">$ git hist master <span class="comment">#master分支上有5个提交</span></span><br><span class="line">* 1c1e018 v5 commit</span><br><span class="line">* 45d9dfb v4 commit</span><br><span class="line">* adba38b v3 commit</span><br><span class="line">* c7ded78 v2 commit</span><br><span class="line">* 45496b8 v1 commit</span><br><span class="line"></span><br><span class="line">$ git merge 82fa977 ece4a12 <span class="comment">#合并b2分支上的2个提交</span></span><br><span class="line">Updating 1c1e018..ece4a12</span><br><span class="line">Fast-forward</span><br><span class="line"> readme.md | 2 ++</span><br><span class="line"> 1 file changed, 2 insertions(+)</span><br><span class="line"></span><br><span class="line">$ git hist master</span><br><span class="line">* ece4a12 v7 commit</span><br><span class="line">* 82fa977 v6 commit</span><br><span class="line">* 1c1e018 v5 commit</span><br><span class="line">* 45d9dfb v4 commit</span><br><span class="line">* adba38b v3 commit</span><br><span class="line">* c7ded78 v2 commit</span><br><span class="line">* 45496b8 v1 commit</span><br></pre></td></tr></table></figure>
<h2 id="不要Fast-Foward合并，会生成merge提交信息"><a href="#不要Fast-Foward合并，会生成merge提交信息" class="headerlink" title="不要Fast-Foward合并，会生成merge提交信息"></a>不要<code>Fast-Foward</code>合并，会生成<code>merge</code>提交信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge [&lt;commit&gt;...] --no-ff</span><br></pre></td></tr></table></figure>
<p>不要<code>Fast-Foward</code>合并，手动生成<code>merge</code>提交信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge [&lt;commit&gt;...] --no-ff -m<span class="string">"&lt;Message&gt;"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ git merge 82fa977 --no-ff</span><br><span class="line">Merge made by the <span class="string">'recursive'</span> strategy.</span><br><span class="line"> readme.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"></span><br><span class="line">$ git hist</span><br><span class="line">*   2cc5c4c Merge commit <span class="string">'82fa977'</span></span><br><span class="line">|\</span><br><span class="line">| * 82fa977 v6 commit</span><br><span class="line">|/</span><br><span class="line">* 1c1e018 v5 commit</span><br><span class="line">* 45d9dfb v4 commit</span><br><span class="line">* adba38b v3 commit</span><br><span class="line">* c7ded78 v2 commit</span><br><span class="line">* 45496b8 v1 commit</span><br></pre></td></tr></table></figure>
<h2 id="将分支合并到当前分支"><a href="#将分支合并到当前分支" class="headerlink" title="将分支合并到当前分支"></a>将分支合并到当前分支</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge &lt;branch&gt;</span><br></pre></td></tr></table></figure>
<h2 id="终止合并操作"><a href="#终止合并操作" class="headerlink" title="终止合并操作"></a>终止合并操作</h2><p>冲突时执行中止<code>merge</code>操作，<code>merge manual</code>中说，这条命令会尽力恢复到<code>Merge</code>之前的状态（可能失败！）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge --abort</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h1><h2 id="创建轻量级标签"><a href="#创建轻量级标签" class="headerlink" title="创建轻量级标签"></a>创建轻量级标签</h2><p>轻量级标签就像是个不会变化的分支，实际上它就是个指向特定提交对象的引用。如果只是临时性加注标签，或者不需要旁注额外信息，用轻量级标签也没问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag &lt;new-tag-name&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag v1.0.0 <span class="comment">#创建一个标签</span></span><br></pre></td></tr></table></figure>
<h2 id="创建含附注标签"><a href="#创建含附注标签" class="headerlink" title="创建含附注标签"></a>创建含附注标签</h2><p>含附注标签，实际上是存储在仓库中的一个独立对象，它有自身的校验和信息，包含着标签的名字，电子邮件地址和日期，以及标签说明，标签本身也允许使用<code>GNU Privacy Guard (GPG)</code>来签署或验证。一般我们都建议使用含附注型的标签，以便保留相关信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -a &lt;new-tag-name&gt; -m <span class="string">"&lt;Message&gt;"</span></span><br></pre></td></tr></table></figure>
<p>如果有自己的<code>GPG</code>私钥，还可以用<code>GPG</code>来签署标签，只需要把之前的<code>-a</code>改为<code>-s</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -s &lt;new-tag-name&gt; -m <span class="string">"&lt;Message&gt;"</span></span><br></pre></td></tr></table></figure>
<h2 id="GPG签署工作"><a href="#GPG签署工作" class="headerlink" title="GPG签署工作"></a><code>GPG</code>签署工作</h2><p>首先，在开始签名之前你需要先配置<code>GPG</code>并安装个人密钥。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --list-keys</span><br><span class="line">/Users/schacon/.gnupg/pubring.gpg</span><br><span class="line">---------------------------------</span><br><span class="line">pub   2048R/0A46826A 2014-06-04</span><br><span class="line">uid                  Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;</span><br><span class="line">sub   2048R/874529A9 2014-06-04</span><br></pre></td></tr></table></figure>
<p>如果你还没有安装一个密钥，可以使用<code>gpg --gen-key</code>生成一个。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --gen-key</span><br></pre></td></tr></table></figure>
<p>一旦你有一个可以签署的私钥，可以通过设置<code>Git</code>的<code>user.signingkey</code>选项来签署。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.signingkey 0A46826A</span><br></pre></td></tr></table></figure>
<p>如果已经设置好一个<code>GPG</code>私钥，可以使用它来签署新的标签。所有需要做的只是使用<code>-s</code>代替<code>-a</code>即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -s v1.5 -m <span class="string">'my signed 1.5 tag'</span></span><br></pre></td></tr></table></figure>
<p>如果在那个标签上运行<code>git show</code>，会看到你的<code>GPG</code>签名附属在后面：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ git show v1.5</span><br><span class="line">tag v1.5</span><br><span class="line">Tagger: Ben Straub &lt;ben@straub.cc&gt;</span><br><span class="line">Date:   Sat May 3 20:29:41 2014 -0700</span><br><span class="line"></span><br><span class="line">my signed 1.5 tag</span><br><span class="line">-----BEGIN PGP SIGNATURE-----</span><br><span class="line">Version: GnuPG v1</span><br><span class="line"></span><br><span class="line">iQEcBAABAgAGBQJTZbQlAAoJEF0+sviABDDrZbQH/09PfE51KPVPlanr6q1v4/Ut</span><br><span class="line">LQxfojUWiLQdg2ESJItkcuweYg+kc3HCyFejeDIBw9dpXt00rY26p05qrpnG+85b</span><br><span class="line">hM1/PswpPLuBSr+oCIDj5GMC2r2iEKsfv2fJbNW8iWAXVLoWZRF8B0MfqX/YTMbm</span><br><span class="line">ecorc4iXzQu7tupRihslbNkfvfciMnSDeSvzCpWAHl7h8Wj6hhqePmLm9lAYqnKp</span><br><span class="line">8S5B/1SSQuEAjRZgI4IexpZoeKGVDptPHxLLS38fozsyi0QyDyzEgJxcJQVMXxVi</span><br><span class="line">RUysgqjcpT8+iQM1PblGfHR4XAhuOqN5Fx06PSaFZhqvWFezJ28/CLyX5q+oIVk=</span><br><span class="line">=EFTF</span><br><span class="line">-----END PGP SIGNATURE-----</span><br><span class="line"></span><br><span class="line">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class="line">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class="line"></span><br><span class="line">    changed the version number</span><br></pre></td></tr></table></figure>
<p>要验证一个签署的标签，可以运行<code>git tag -v [tag-name]</code>。这个命令使用<code>GPG</code>来验证签名。为了验证能正常工作，签署者的公钥需要在你的钥匙链中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -v v1.4.2.1</span><br><span class="line">object 883653babd8ee7ea23e6a5c392bb739348b1eb61</span><br><span class="line"><span class="built_in">type</span> commit</span><br><span class="line">tag v1.4.2.1</span><br><span class="line">tagger Junio C Hamano &lt;junkio@cox.net&gt; 1158138501 -0700</span><br><span class="line"></span><br><span class="line">GIT 1.4.2.1</span><br><span class="line"></span><br><span class="line">Minor fixes since 1.4.2, including git-mv and git-http with alternates.</span><br><span class="line">gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A</span><br><span class="line">gpg: Good signature from <span class="string">"Junio C Hamano &lt;junkio@cox.net&gt;"</span></span><br><span class="line">gpg:                 aka <span class="string">"[jpeg image of size 1513]"</span></span><br><span class="line">Primary key fingerprint: 3565 2A26 2040 E066 C9A7  4A7D C0C6 D9A4 F311 9B9A</span><br></pre></td></tr></table></figure>
<p>如果没有签署者的公钥，那么你将会得到类似下面的东西：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A</span><br><span class="line">gpg: Can<span class="string">'t check signature: public key not found</span></span><br><span class="line"><span class="string">error: could not verify the tag '</span>v1.4.2.1<span class="string">'</span></span><br></pre></td></tr></table></figure>
<p>在最新版本的<code>Git</code>中（<code>v1.7.9</code>及以上），也可以签署个人提交。 如果相对于标签而言你对直接签署到提交更感兴趣的话，所有要做的只是增加一个<code>-S</code>到<code>git commit</code>命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -a -S -m <span class="string">'signed commit'</span></span><br><span class="line"></span><br><span class="line">You need a passphrase to unlock the secret key <span class="keyword">for</span></span><br><span class="line">user: <span class="string">"Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;"</span></span><br><span class="line">2048-bit RSA key, ID 0A46826A, created 2014-06-04</span><br><span class="line"></span><br><span class="line">[master 5c3386c] signed commit</span><br><span class="line"> 4 files changed, 4 insertions(+), 24 deletions(-)</span><br><span class="line"> rewrite Rakefile (100%)</span><br><span class="line"> create mode 100644 lib/git.rb</span><br></pre></td></tr></table></figure>
<p><code>git log</code>也有一个<code>--show-signature</code>选项来查看及验证这些签名。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --show-signature -1</span><br><span class="line">commit 5c3386cf54bba0a33a32da706aa52bc0155503c2</span><br><span class="line">gpg: Signature made Wed Jun  4 19:49:17 2014 PDT using RSA key ID 0A46826A</span><br><span class="line">gpg: Good signature from <span class="string">"Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;"</span></span><br><span class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">Date:   Wed Jun 4 19:49:17 2014 -0700</span><br><span class="line"></span><br><span class="line">    signed commit</span><br></pre></td></tr></table></figure>
<h2 id="查看所有的标签"><a href="#查看所有的标签" class="headerlink" title="查看所有的标签"></a>查看所有的标签</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git tag</span><br><span class="line">git tag -l</span><br><span class="line">git tag --list</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git tag</span><br><span class="line">v1.0.0</span><br><span class="line">v2.0.0</span><br><span class="line"></span><br><span class="line">$ git tag -l</span><br><span class="line">v1.0.0</span><br><span class="line">v2.0.0</span><br><span class="line"></span><br><span class="line">$ git tag --list</span><br><span class="line">v1.0.0</span><br><span class="line">v2.0.0</span><br></pre></td></tr></table></figure>
<h2 id="标签匹配查询"><a href="#标签匹配查询" class="headerlink" title="标签匹配查询"></a>标签匹配查询</h2><p>使用<code>*</code>支持模糊匹配</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -l | --list <span class="string">"tag-name*"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -l <span class="string">"*1*"</span></span><br><span class="line">v1.0.0</span><br></pre></td></tr></table></figure>
<h2 id="查看标签的信息"><a href="#查看标签的信息" class="headerlink" title="查看标签的信息"></a>查看标签的信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag show &lt;tag-name&gt;</span><br></pre></td></tr></table></figure>
<h2 id="删除标签"><a href="#删除标签" class="headerlink" title="删除标签"></a>删除标签</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag -d &lt;tag-name&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="文件内容追溯"><a href="#文件内容追溯" class="headerlink" title="文件内容追溯"></a>文件内容追溯</h1><h2 id="追溯整个文件的内容"><a href="#追溯整个文件的内容" class="headerlink" title="追溯整个文件的内容"></a>追溯整个文件的内容</h2><p>会逐行显示文件，在每一行的行首显示此行最早是在什么版本引入的，由谁引入的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git blame &lt;file&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git blame readme.md</span><br><span class="line">^45496b8 (Jerry.Chen 2016-01-23 18:46:54 +0800 1) v1</span><br><span class="line">c7ded782 (Jerry.Chen 2016-01-23 18:47:08 +0800 2) v2</span><br><span class="line">adba38bc (Jerry.Chen 2016-01-23 18:47:35 +0800 3) v3</span><br><span class="line">45d9dfb1 (Jerry.Chen 2016-01-23 21:52:08 +0800 4) v4</span><br><span class="line">1c1e0188 (Jerry.Chen 2016-01-23 22:13:49 +0800 5) v5</span><br><span class="line">82fa9774 (Jerry.Chen 2016-01-23 23:37:39 +0800 6) v6</span><br></pre></td></tr></table></figure>
<h2 id="追溯指定的行号"><a href="#追溯指定的行号" class="headerlink" title="追溯指定的行号"></a>追溯指定的行号</h2><p><code>n</code>：起始行号；<code>m</code>：结束行号，如果未指定，则使用文件的最后一行的行号</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git blame -L &lt;n[,m]&gt; &lt;file&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git blame readme.md -L 3</span><br><span class="line">adba38bc (Jerry.Chen 2016-01-23 18:47:35 +0800 3) v3</span><br><span class="line">45d9dfb1 (Jerry.Chen 2016-01-23 21:52:08 +0800 4) v4</span><br><span class="line">1c1e0188 (Jerry.Chen 2016-01-23 22:13:49 +0800 5) v5</span><br><span class="line">82fa9774 (Jerry.Chen 2016-01-23 23:37:39 +0800 6) v6</span><br><span class="line"></span><br><span class="line">$ git blame readme.md -L 3,4</span><br><span class="line">adba38bc (Jerry.Chen 2016-01-23 18:47:35 +0800 3) v3</span><br><span class="line">45d9dfb1 (Jerry.Chen 2016-01-23 21:52:08 +0800 4) v4</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-ls-files"><a href="#git-ls-files" class="headerlink" title="git ls-files"></a>git ls-files</h1><h2 id="显示暂存区和版本库中的文件"><a href="#显示暂存区和版本库中的文件" class="headerlink" title="显示暂存区和版本库中的文件"></a>显示暂存区和版本库中的文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git ls-files</span><br></pre></td></tr></table></figure>
<h2 id="查看历史版本的文件列表"><a href="#查看历史版本的文件列表" class="headerlink" title="查看历史版本的文件列表"></a>查看历史版本的文件列表</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git ls-files --with-tree=HEAD^</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-rm"><a href="#git-rm" class="headerlink" title="git rm"></a>git rm</h1><h2 id="工作区删除文件"><a href="#工作区删除文件" class="headerlink" title="工作区删除文件"></a>工作区删除文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm &lt;file&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git rm readme.md</span><br><span class="line">rm <span class="string">'readme.md'</span></span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        deleted:    readme.md</span><br></pre></td></tr></table></figure>
<h2 id="暂存区删除文件"><a href="#暂存区删除文件" class="headerlink" title="暂存区删除文件"></a>暂存区删除文件</h2><p>从暂存区删除文件，工作区不会删除。删除的文件在工作区存在，状态变为未追踪</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached &lt;file&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git rm --cached readme.md</span><br><span class="line">rm <span class="string">'readme.md'</span></span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed: <span class="comment">#暂存区有待提交的删除内容</span></span><br><span class="line">  (use <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"></span><br><span class="line">        deleted:    readme.md</span><br><span class="line"></span><br><span class="line">Untracked files:       <span class="comment">#删除的文件在工作区存在，状态变为未追踪</span></span><br><span class="line">  (use <span class="string">"git add &lt;file&gt;..."</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line"></span><br><span class="line">        readme.md</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-clean"><a href="#git-clean" class="headerlink" title="git clean"></a>git clean</h1><h2 id="显示将要被删除的目录和文件"><a href="#显示将要被删除的目录和文件" class="headerlink" title="显示将要被删除的目录和文件"></a>显示将要被删除的目录和文件</h2><p>针对那些未被跟踪的文件和目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clean -nd</span><br></pre></td></tr></table></figure>
<h2 id="删除掉未被跟踪的文件和目录"><a href="#删除掉未被跟踪的文件和目录" class="headerlink" title="删除掉未被跟踪的文件和目录"></a>删除掉未被跟踪的文件和目录</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clean -fd</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-mv"><a href="#git-mv" class="headerlink" title="git mv"></a>git mv</h1><h2 id="移动或者重命名文件"><a href="#移动或者重命名文件" class="headerlink" title="移动或者重命名文件"></a>移动或者重命名文件</h2><p>如果移动或者重命名文件操作成功会添加到暂存区</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git mv [&lt;options&gt;] &lt;<span class="built_in">source</span>&gt;... &lt;destination&gt;</span><br></pre></td></tr></table></figure>
<p><code>-n | --dry-run</code>：演练移动或者重命名文件，看看操作是否会成功</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git mv -n | --dry-run &lt;<span class="built_in">source</span>&gt;... &lt;destination&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git mv readme.md t1.md -n <span class="comment">#演练将readme.md重命名为t1.md</span></span><br><span class="line">Checking rename of <span class="string">'readme.md'</span> to <span class="string">'t1.md'</span></span><br><span class="line">Renaming readme.md to t1.md</span><br><span class="line"></span><br><span class="line">$ git status <span class="comment">#查看状态，没有修改的内容</span></span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working directory clean</span><br></pre></td></tr></table></figure>
<p><code>-f | --force</code>：强制移动或者重命名文件，不管目标是否已经存在</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git mv -f | --force &lt;<span class="built_in">source</span>&gt;... &lt;destination&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> 显示提交历史信息</span><br><span class="line">git <span class="built_in">log</span> &lt;branch&gt; 显示分支提交历史信息</span><br><span class="line">git <span class="built_in">log</span> -(n) 仅显示最近的n条提交</span><br><span class="line">git <span class="built_in">log</span> &lt;file&gt; 显示该文件提交信息  </span><br><span class="line">git <span class="built_in">log</span> -p 显示每次提交的内容差异  </span><br><span class="line">git <span class="built_in">log</span> -p -2 仅显示最近的两次更新  </span><br><span class="line">git <span class="built_in">log</span> --<span class="built_in">stat</span> 显示简要的增改行数统计</span><br><span class="line">git <span class="built_in">log</span> --date-order --date=iso --graph --full-history --all --pretty=format:<span class="string">'%x08%x09%C(red)%h %C(cyan)%ad%x08%x08%x08%x08%x08%x08%x08%x08%x08%x08%x08%x08%x08%x08%x08 %C(bold blue)%aN%C(reset)%C(bold yellow)%d %C(reset)%s'</span></span><br><span class="line"> -p 按补丁格式显示每个更新之间的差异。</span><br><span class="line"> --<span class="built_in">stat</span> 显示每次更新的文件修改统计信息。</span><br><span class="line"> --shortstat 只显示--<span class="built_in">stat</span> 中最后的行数修改添加移除统计。</span><br><span class="line"> --name-only 仅在提交信息后显示已修改的文件清单。</span><br><span class="line"> --name-status 显示新增、修改、删除的文件清单。</span><br><span class="line"> --abbrev-commit 仅显示SHA-1 的前几个字符，而非所有的40 个字符。</span><br><span class="line"> --relative-date 使用较短的相对时间显示（比如，“2 weeks ago”）。</span><br><span class="line"> --graph 显示ASCII 图形表示的分支合并历史。</span><br><span class="line"> --pretty 使用其他格式显示历史提交信息。可用的选项包括oneline，short，full，fuller 和format（后跟指</span><br><span class="line">定格式）。</span><br><span class="line"> format选项说明</span><br><span class="line">  %H 提交对象（commit）的完整哈希字串</span><br><span class="line">  %h 提交对象的简短哈希字串</span><br><span class="line">  %T 树对象（tree）的完整哈希字串</span><br><span class="line">  %t 树对象的简短哈希字串</span><br><span class="line">  %P 父对象（parent）的完整哈希字串</span><br><span class="line">  %p 父对象的简短哈希字串</span><br><span class="line">  %an 作者（author）的名字</span><br><span class="line">  %ae 作者的电子邮件地址</span><br><span class="line">  %ad 作者修订日期（可以用-date= 选项定制格式）</span><br><span class="line">  %ar 作者修订日期，按多久以前的方式显示</span><br><span class="line">  %cn 提交者(committer)的名字</span><br><span class="line">  %ce 提交者的电子邮件地址</span><br><span class="line">  %<span class="built_in">cd</span> 提交日期</span><br><span class="line">  %cr 提交日期，按多久以前的方式显示</span><br><span class="line">  %s 提交说明</span><br><span class="line">git <span class="built_in">log</span> --pretty=<span class="string">"%h:%s"</span> --author=gitster --since=<span class="string">"2008-10-01"</span> --before=<span class="string">"2008-11-01"</span> --no-merges</span><br><span class="line">--since, --after 仅显示指定时间之后的提交。</span><br><span class="line">--until, --before 仅显示指定时间之前的提交。</span><br><span class="line">--author 仅显示指定作者相关的提交。</span><br><span class="line">--committer 仅显示指定提交者相关的提交。</span><br><span class="line">git <span class="built_in">log</span> --oneline --decorate 显示tag信息</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="忽略文件"><a href="#忽略文件" class="headerlink" title="忽略文件"></a>忽略文件</h1><h2 id="工作区创建文件-gitignore"><a href="#工作区创建文件-gitignore" class="headerlink" title="工作区创建文件.gitignore"></a>工作区创建文件.gitignore</h2><p>工作区创建文件<code>.gitignore</code>，然后在里面添加忽略规则。<code>.gitignore</code>这个文件本身会提交到版本库中去，用来保存的是公共的需要排除的文件。<code>.gitignore</code>的语法规范如下：</p>
<ol>
<li>以<code>＃</code>开头的行是注释</li>
<li>以<code>/</code>做为行尾字符，则要忽略的是目录</li>
<li>以<code>!</code>做为行首字符，则是取反模式</li>
<li>空白行不做处理</li>
<li>支持正则表达模式匹配<br><code>*</code> 匹配零个或多个任意字符<br><code>[abc]</code> 匹配任何一个在方括号中的字符<br><code>?</code> 匹配任意一个字符<br><code>[0-9a-zA-Z]</code> 在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如<code>[0-9a-zA-Z]</code>表示匹配所有<code>0</code>到<code>9</code>的数字和所有字母）<br><code>\</code> 转义字符<br><code>[ ^abc]</code> 匹配不是<code>a</code>, <code>b</code>, <code>c</code>中任一字符即可<br><code>{ab,bb,cx}</code> 匹配<code>ab</code>, <code>bb</code>, <code>cx</code>中任一类型即可</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ touch .gitignore</span><br><span class="line"></span><br><span class="line">$ ls -a</span><br><span class="line">./  ../  .git/  .gitignore  readme.md</span><br><span class="line"></span><br><span class="line">$ vi .gitignore</span><br><span class="line"></span><br><span class="line">.a        <span class="comment"># 忽略所有 .a 结尾的文件</span></span><br><span class="line">!lib.a    <span class="comment"># 但 lib.a 除外</span></span><br><span class="line">/TODO     <span class="comment"># 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO</span></span><br><span class="line">build/    <span class="comment"># 忽略 build/ 目录下的所有文件</span></span><br><span class="line">doc/*.txt <span class="comment"># 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</span></span><br></pre></td></tr></table></figure>
<p><b>注意：</b><code>.gitignore</code>只能忽略那些没有被版本库追踪的文件，如果文件已经提交到了版本管理中，则在<code>.gitignore</code>中对这些文件的忽略是无效的，可以使用以下方式进行临时忽略</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git update-index --assume-unchanged /path/to/file     <span class="comment">#忽略跟踪</span></span><br><span class="line">git update-index --no-assume-unchanged /path/to/file  <span class="comment">#恢复跟踪</span></span><br></pre></td></tr></table></figure>
<p>但此方式在<code>git rebase</code>操作之后，这些被忽略的文件内容如果被修改过了，会被强制恢复到<code>git rebase</code>这个时候的版本内容。如果要从根本上忽略这些文件，请使用<code>git rm</code>删除掉这些文件，然后提交到版本库中</p>
<h2 id="编辑-git-info-exclude"><a href="#编辑-git-info-exclude" class="headerlink" title="编辑.git/info/exclude"></a>编辑.git/info/exclude</h2><p>独享忽略列表，不需要提交到版本库中，不会影响其他人</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi .git/info/exclude</span><br></pre></td></tr></table></figure>
<h2 id="用户目录下的全局-gitignore"><a href="#用户目录下的全局-gitignore" class="headerlink" title="用户目录下的全局.gitignore"></a>用户目录下的全局.gitignore</h2><p>在用户目录下创建<code>~/.gitignore</code>文件，以同样的规则来添加哪些文件是不需要版本控制的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.excludesfile ~/.gitignore <span class="comment">#需要执行此命令，才能是全局配置生效</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="git-grep"><a href="#git-grep" class="headerlink" title="git grep"></a>git grep</h1><h2 id="操作语法"><a href="#操作语法" class="headerlink" title="操作语法"></a>操作语法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git grep [&lt;options&gt;] [-e] &lt;pattern&gt; [&lt;rev&gt;...] [[--] &lt;path&gt;...]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git grep <span class="string">"工作区文件内容搜索"</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="windows平台下的msysGit中shell环境配置"><a href="#windows平台下的msysGit中shell环境配置" class="headerlink" title="windows平台下的msysGit中shell环境配置"></a>windows平台下的msysGit中shell环境配置</h1><p><br>编辑配置文件<code>/etc/inputrc</code>，修改或者添加以下配置，重启后就能在<code>shell</code>界面输入中文</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># disable/enable 8bit input</span></span><br><span class="line"><span class="built_in">set</span> meta-flag on</span><br><span class="line"><span class="built_in">set</span> input-meta on</span><br><span class="line"><span class="built_in">set</span> output-meta on</span><br><span class="line"><span class="built_in">set</span> convert-meta off</span><br></pre></td></tr></table></figure>
<p><code>ls</code>命令显示中文，将<code>alias</code>命令添加到配置文件<code>/etc/profile</code>中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> ls=<span class="string">'ls --show-control-chars --color=auto'</span></span><br><span class="line"><span class="built_in">alias</span> gitk=<span class="string">'gitk --all'</span> <span class="comment">#设置别名</span></span><br></pre></td></tr></table></figure>
<p>解决<code>gitk</code>和<code>Git Gui</code>乱码，在<code>/etc/gitconfig</code>中添加或修改以下配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[gui]</span><br><span class="line">    encoding = utf-8</span><br></pre></td></tr></table></figure>
<p>在<code>/etc/git-completion.bash</code>末尾位置添加<code>cd /d</code>，可以让<code>msysGit</code>打开定位到<code>D</code>盘</p>
<hr>
<h1 id="windows平台下的msysGit工具"><a href="#windows平台下的msysGit工具" class="headerlink" title="windows平台下的msysGit工具"></a>windows平台下的msysGit工具</h1><h2 id="gitk"><a href="#gitk" class="headerlink" title="gitk"></a>gitk</h2><p>显示所有的分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitk --all</span><br></pre></td></tr></table></figure>
<p>显示某天以来的所有提交</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitk --since=<span class="string">"[YYYY-MM-dd]|[2 days ago][2 weeks ago]..."</span></span><br></pre></td></tr></table></figure>
<h2 id="gui"><a href="#gui" class="headerlink" title="gui"></a>gui</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git gui</span><br></pre></td></tr></table></figure>
      
    </div>

    
      

  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2016/IntelliJ-Idea-常用插件/" rel="bookmark">IntelliJ Idea 常用插件</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2016/IntelliJ-Idea-快捷键映射/" rel="bookmark">IntelliJ Idea 快捷键映射</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2016/IntelliJ-Idea-设置中的Copyright和scopes关联起来/" rel="bookmark">IntelliJ Idea 设置中的Copyright和scopes关联起来</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2016/IntelliJ-Idea-配置同步/" rel="bookmark">IntelliJ Idea 配置同步</a></div>
      
    </li>
  
    <li class="popular-posts-item">
      
      
      <div class="popular-posts-title"><a href="/2017/Mac开发环境搭建-v1/" rel="bookmark">Mac开发环境搭建-v1</a></div>
      
    </li>
  
  </ul>


    

    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>请我喝杯农夫山泉吧，原创来之不易</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="https://blog-1257248892.cos.ap-shanghai.myqcloud.com/static/images/reward/wechat-reward-1.png" alt="Jerry 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="https://blog-1257248892.cos.ap-shanghai.myqcloud.com/static/images/reward/alipay-reward-1.png" alt="Jerry 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Jerry</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://blog.myoss.app/2016/Git操作/" title="Git操作">https://blog.myoss.app/2016/Git操作/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/开发配置/" rel="tag"># 开发配置</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/IntelliJ-Idea-快捷键映射/" rel="next" title="IntelliJ Idea 快捷键映射">
                <i class="fa fa-chevron-left"></i> IntelliJ Idea 快捷键映射
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/IntelliJ-Idea-配置同步/" rel="prev" title="IntelliJ Idea 配置同步">
                IntelliJ Idea 配置同步 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      
      
  
  
  
    
      
    
    <a href="https://github.com/myoss" class="github-corner" target="_blank" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#FD6C6C; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg>
    
      </a>
    



      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://blog-1257248892.cos.ap-shanghai.myqcloud.com/static/images/avatar.jpeg"
                alt="Jerry" />
            
              <p class="site-author-name" itemprop="name">Jerry</p>
              <p class="site-description motion-element" itemprop="description">好记性不如烂笔头</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">13</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/myoss" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.zhihu.com/people/jerry.chen" target="_blank" title="知乎" rel="external nofollow"><i class="fa fa-fw fa-globe"></i>知乎</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://my.oschina.net/ayao/blog" target="_blank" title="OSChina" rel="external nofollow"><i class="fa fa-fw fa-globe"></i>OSChina</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://blog.sina.com.cn/ayao8" target="_blank" title="Sina" rel="external nofollow"><i class="fa fa-fw fa-globe"></i>Sina</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="/2016/Git操作" target="_blank" title="Git操作" rel="external nofollow"><i class="fa fa-fw fa-git-square"></i>Git操作</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="/2017/Mac开发环境搭建-v1" target="_blank" title="Mac开发环境" rel="external nofollow"><i class="fa fa-fw fa-apple"></i>Mac开发环境</a>
                  
                </span>
              
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/myoss-cloud" title="myoss cloud" target="_blank">myoss cloud</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://myoss.github.io/git-guide/index.zh.html" title="Git Guide" target="_blank">Git Guide</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#git-config"><span class="nav-number">1.</span> <span class="nav-text">git config</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#配置优先级"><span class="nav-number">1.1.</span> <span class="nav-text">配置优先级</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#选项"><span class="nav-number">1.2.</span> <span class="nav-text">选项</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#查看生效的配置"><span class="nav-number">1.2.1.</span> <span class="nav-text">查看生效的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看某个参数的配置"><span class="nav-number">1.2.2.</span> <span class="nav-text">查看某个参数的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置用户名称和用户Email地址"><span class="nav-number">1.2.3.</span> <span class="nav-text">设置用户名称和用户Email地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#换行符：CRLF-LF"><span class="nav-number">1.2.4.</span> <span class="nav-text">换行符：CRLF/LF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#换行符：SafeCRLF"><span class="nav-number">1.2.5.</span> <span class="nav-text">换行符：SafeCRLF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#core-quotepath"><span class="nav-number">1.2.6.</span> <span class="nav-text">core.quotepath</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#core-pager"><span class="nav-number">1.2.7.</span> <span class="nav-text">core.pager</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其它配置"><span class="nav-number">1.2.8.</span> <span class="nav-text">其它配置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#工作区"><span class="nav-number">2.</span> <span class="nav-text">工作区</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#暂存区"><span class="nav-number">3.</span> <span class="nav-text">暂存区</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#版本库"><span class="nav-number">4.</span> <span class="nav-text">版本库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#工作区-暂存区-版本库，三者的关系图"><span class="nav-number">4.1.</span> <span class="nav-text">工作区/暂存区/版本库，三者的关系图</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HEAD"><span class="nav-number">5.</span> <span class="nav-text">HEAD</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查看快照"><span class="nav-number">5.1.</span> <span class="nav-text">查看快照</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看引用日志的输出"><span class="nav-number">5.2.</span> <span class="nav-text">查看引用日志的输出</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SSH-Key"><span class="nav-number">6.</span> <span class="nav-text">SSH Key</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查看已经保存的SSH密钥"><span class="nav-number">6.1.</span> <span class="nav-text">查看已经保存的SSH密钥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#生成SSH密钥"><span class="nav-number">6.2.</span> <span class="nav-text">生成SSH密钥</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-clone"><span class="nav-number">7.</span> <span class="nav-text">git clone</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#包含工作区的版本库"><span class="nav-number">7.1.</span> <span class="nav-text">包含工作区的版本库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#裸版本库，不包含工作区"><span class="nav-number">7.2.</span> <span class="nav-text">裸版本库，不包含工作区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#支持的多种协议"><span class="nav-number">7.3.</span> <span class="nav-text">支持的多种协议</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-remote"><span class="nav-number">8.</span> <span class="nav-text">git remote</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查看当前工作目录的远程仓库信息"><span class="nav-number">8.1.</span> <span class="nav-text">查看当前工作目录的远程仓库信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#添加远程仓库"><span class="nav-number">8.2.</span> <span class="nav-text">添加远程仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改远程仓库的url地址"><span class="nav-number">8.3.</span> <span class="nav-text">修改远程仓库的url地址</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改某个远程仓库的简写名称"><span class="nav-number">8.4.</span> <span class="nav-text">修改某个远程仓库的简写名称</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#移除某个远程仓库的配置信息，不会删除任何文件"><span class="nav-number">8.5.</span> <span class="nav-text">移除某个远程仓库的配置信息，不会删除任何文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-fetch"><span class="nav-number">9.</span> <span class="nav-text">git fetch</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#拉取远程仓库的更新数据"><span class="nav-number">9.1.</span> <span class="nav-text">拉取远程仓库的更新数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#拉取所有远程仓库"><span class="nav-number">9.2.</span> <span class="nav-text">拉取所有远程仓库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-pull"><span class="nav-number">10.</span> <span class="nav-text">git pull</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#获取远程仓库的更新数据，再自动合并到本地仓库中的当前分支"><span class="nav-number">10.1.</span> <span class="nav-text">获取远程仓库的更新数据，再自动合并到本地仓库中的当前分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取远程仓库的更新数据，再自动合并到本地仓库中的其它分支"><span class="nav-number">10.2.</span> <span class="nav-text">获取远程仓库的更新数据，再自动合并到本地仓库中的其它分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取远程仓库上所有的tag"><span class="nav-number">10.3.</span> <span class="nav-text">获取远程仓库上所有的tag</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-push"><span class="nav-number">11.</span> <span class="nav-text">git push</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#将本地分支的更新，推送到远程仓库"><span class="nav-number">11.1.</span> <span class="nav-text">将本地分支的更新，推送到远程仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除远程仓库的分支"><span class="nav-number">11.2.</span> <span class="nav-text">删除远程仓库的分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#强制更新，覆盖的方式推送"><span class="nav-number">11.3.</span> <span class="nav-text">强制更新，覆盖的方式推送</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#推送标签"><span class="nav-number">11.4.</span> <span class="nav-text">推送标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#推送所有的标签"><span class="nav-number">11.5.</span> <span class="nav-text">推送所有的标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#推送本地所有的分支，不包含标签"><span class="nav-number">11.6.</span> <span class="nav-text">推送本地所有的分支，不包含标签</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-init"><span class="nav-number">12.</span> <span class="nav-text">git init</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#初始化本地仓库"><span class="nav-number">12.1.</span> <span class="nav-text">初始化本地仓库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-add"><span class="nav-number">13.</span> <span class="nav-text">git add</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#添加未跟踪的文件"><span class="nav-number">13.1.</span> <span class="nav-text">添加未跟踪的文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#添加已经追踪的文件"><span class="nav-number">13.2.</span> <span class="nav-text">添加已经追踪的文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#巧用git-add，快速回退测试代码"><span class="nav-number">13.3.</span> <span class="nav-text">巧用git add，快速回退测试代码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-status"><span class="nav-number">14.</span> <span class="nav-text">git status</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查看当前分支的文件变化状态"><span class="nav-number">14.1.</span> <span class="nav-text">查看当前分支的文件变化状态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看精简状态"><span class="nav-number">14.2.</span> <span class="nav-text">查看精简状态</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-cherry"><span class="nav-number">15.</span> <span class="nav-text">git cherry</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查看本地分支领先远程仓库的提交"><span class="nav-number">15.1.</span> <span class="nav-text">查看本地分支领先远程仓库的提交</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-diff"><span class="nav-number">16.</span> <span class="nav-text">git diff</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#比较工作区和暂存区"><span class="nav-number">16.1.</span> <span class="nav-text">比较工作区和暂存区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#逐词比较，而非默认的逐行比较"><span class="nav-number">16.2.</span> <span class="nav-text">逐词比较，而非默认的逐行比较</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较暂存区和HEAD（本地git仓库）"><span class="nav-number">16.3.</span> <span class="nav-text">比较暂存区和HEAD（本地git仓库）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较工作区和HEAD（本地git仓库）"><span class="nav-number">16.4.</span> <span class="nav-text">比较工作区和HEAD（本地git仓库）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较两个提交"><span class="nav-number">16.5.</span> <span class="nav-text">比较两个提交</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较两个分支"><span class="nav-number">16.6.</span> <span class="nav-text">比较两个分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较两个远程分支"><span class="nav-number">16.7.</span> <span class="nav-text">比较两个远程分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#当前分支比较另外一个分支"><span class="nav-number">16.8.</span> <span class="nav-text">当前分支比较另外一个分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较之后，显示简要的增改行数统计"><span class="nav-number">16.9.</span> <span class="nav-text">比较之后，显示简要的增改行数统计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#比较二进制文件差异"><span class="nav-number">16.10.</span> <span class="nav-text">比较二进制文件差异</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-stash"><span class="nav-number">17.</span> <span class="nav-text">git stash</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#储藏当前工作区和暂存区修改的内容"><span class="nav-number">17.1.</span> <span class="nav-text">储藏当前工作区和暂存区修改的内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#储藏的完整命令"><span class="nav-number">17.2.</span> <span class="nav-text">储藏的完整命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看已经保存的储藏列表"><span class="nav-number">17.3.</span> <span class="nav-text">查看已经保存的储藏列表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除储藏"><span class="nav-number">17.4.</span> <span class="nav-text">删除储藏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除所有的储藏"><span class="nav-number">17.5.</span> <span class="nav-text">删除所有的储藏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看-某次-储藏修改的内容"><span class="nav-number">17.6.</span> <span class="nav-text">查看[某次]储藏修改的内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#恢复保存的工作进度"><span class="nav-number">17.7.</span> <span class="nav-text">恢复保存的工作进度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用储藏的内容创建新的分支"><span class="nav-number">17.8.</span> <span class="nav-text">使用储藏的内容创建新的分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看储藏列表的SHA-1值"><span class="nav-number">17.9.</span> <span class="nav-text">查看储藏列表的SHA-1值</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-commit"><span class="nav-number">18.</span> <span class="nav-text">git commit</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#仓库中的文件可能存在于这三种状态"><span class="nav-number">18.1.</span> <span class="nav-text">仓库中的文件可能存在于这三种状态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#提交暂存区的内容"><span class="nav-number">18.2.</span> <span class="nav-text">提交暂存区的内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#提交暂存区和工作区的内容"><span class="nav-number">18.3.</span> <span class="nav-text">提交暂存区和工作区的内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改或者撤销最后一次提交"><span class="nav-number">18.4.</span> <span class="nav-text">修改或者撤销最后一次提交</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-checkout"><span class="nav-number">19.</span> <span class="nav-text">git checkout</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#汇总显示（工作区和暂存区）与HEAD的差异"><span class="nav-number">19.1.</span> <span class="nav-text">汇总显示（工作区和暂存区）与HEAD的差异</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#撤销工作区的修改"><span class="nav-number">19.2.</span> <span class="nav-text">撤销工作区的修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用HEAD中的内容替换暂存区和工作区的修改"><span class="nav-number">19.3.</span> <span class="nav-text">用HEAD中的内容替换暂存区和工作区的修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用其它分支的内容替换当前分支上暂存区和工作区的内容"><span class="nav-number">19.4.</span> <span class="nav-text">使用其它分支的内容替换当前分支上暂存区和工作区的内容</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-reset"><span class="nav-number">20.</span> <span class="nav-text">git reset</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本操作"><span class="nav-number">20.1.</span> <span class="nav-text">基本操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重置暂存区"><span class="nav-number">20.2.</span> <span class="nav-text">重置暂存区</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实战：两个提交压缩为一个"><span class="nav-number">20.3.</span> <span class="nav-text">实战：两个提交压缩为一个</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-rebase"><span class="nav-number">21.</span> <span class="nav-text">git rebase</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#交互式变基操作"><span class="nav-number">21.1.</span> <span class="nav-text">交互式变基操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#将其它分支上的修改应用到当前分支"><span class="nav-number">21.2.</span> <span class="nav-text">将其它分支上的修改应用到当前分支</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-branch"><span class="nav-number">22.</span> <span class="nav-text">git branch</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#显示所有分支信息"><span class="nav-number">22.1.</span> <span class="nav-text">显示所有分支信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建新分支"><span class="nav-number">22.2.</span> <span class="nav-text">创建新分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重命名分支"><span class="nav-number">22.3.</span> <span class="nav-text">重命名分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除分支"><span class="nav-number">22.4.</span> <span class="nav-text">删除分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看已经合并到当前分支的分支"><span class="nav-number">22.5.</span> <span class="nav-text">查看已经合并到当前分支的分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看没有合并到当前分支的分支"><span class="nav-number">22.6.</span> <span class="nav-text">查看没有合并到当前分支的分支</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-merge"><span class="nav-number">23.</span> <span class="nav-text">git merge</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本操作-1"><span class="nav-number">23.1.</span> <span class="nav-text">基本操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#不要Fast-Foward合并，会生成merge提交信息"><span class="nav-number">23.2.</span> <span class="nav-text">不要Fast-Foward合并，会生成merge提交信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#将分支合并到当前分支"><span class="nav-number">23.3.</span> <span class="nav-text">将分支合并到当前分支</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#终止合并操作"><span class="nav-number">23.4.</span> <span class="nav-text">终止合并操作</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-tag"><span class="nav-number">24.</span> <span class="nav-text">git tag</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建轻量级标签"><span class="nav-number">24.1.</span> <span class="nav-text">创建轻量级标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建含附注标签"><span class="nav-number">24.2.</span> <span class="nav-text">创建含附注标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GPG签署工作"><span class="nav-number">24.3.</span> <span class="nav-text">GPG签署工作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看所有的标签"><span class="nav-number">24.4.</span> <span class="nav-text">查看所有的标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#标签匹配查询"><span class="nav-number">24.5.</span> <span class="nav-text">标签匹配查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看标签的信息"><span class="nav-number">24.6.</span> <span class="nav-text">查看标签的信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除标签"><span class="nav-number">24.7.</span> <span class="nav-text">删除标签</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件内容追溯"><span class="nav-number">25.</span> <span class="nav-text">文件内容追溯</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#追溯整个文件的内容"><span class="nav-number">25.1.</span> <span class="nav-text">追溯整个文件的内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#追溯指定的行号"><span class="nav-number">25.2.</span> <span class="nav-text">追溯指定的行号</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-ls-files"><span class="nav-number">26.</span> <span class="nav-text">git ls-files</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#显示暂存区和版本库中的文件"><span class="nav-number">26.1.</span> <span class="nav-text">显示暂存区和版本库中的文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看历史版本的文件列表"><span class="nav-number">26.2.</span> <span class="nav-text">查看历史版本的文件列表</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-rm"><span class="nav-number">27.</span> <span class="nav-text">git rm</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#工作区删除文件"><span class="nav-number">27.1.</span> <span class="nav-text">工作区删除文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#暂存区删除文件"><span class="nav-number">27.2.</span> <span class="nav-text">暂存区删除文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-clean"><span class="nav-number">28.</span> <span class="nav-text">git clean</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#显示将要被删除的目录和文件"><span class="nav-number">28.1.</span> <span class="nav-text">显示将要被删除的目录和文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除掉未被跟踪的文件和目录"><span class="nav-number">28.2.</span> <span class="nav-text">删除掉未被跟踪的文件和目录</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-mv"><span class="nav-number">29.</span> <span class="nav-text">git mv</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#移动或者重命名文件"><span class="nav-number">29.1.</span> <span class="nav-text">移动或者重命名文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-log"><span class="nav-number">30.</span> <span class="nav-text">git log</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#忽略文件"><span class="nav-number">31.</span> <span class="nav-text">忽略文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#工作区创建文件-gitignore"><span class="nav-number">31.1.</span> <span class="nav-text">工作区创建文件.gitignore</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编辑-git-info-exclude"><span class="nav-number">31.2.</span> <span class="nav-text">编辑.git/info/exclude</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户目录下的全局-gitignore"><span class="nav-number">31.3.</span> <span class="nav-text">用户目录下的全局.gitignore</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#git-grep"><span class="nav-number">32.</span> <span class="nav-text">git grep</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#操作语法"><span class="nav-number">32.1.</span> <span class="nav-text">操作语法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#windows平台下的msysGit中shell环境配置"><span class="nav-number">33.</span> <span class="nav-text">windows平台下的msysGit中shell环境配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#windows平台下的msysGit工具"><span class="nav-number">34.</span> <span class="nav-text">windows平台下的msysGit工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#gitk"><span class="nav-number">34.1.</span> <span class="nav-text">gitk</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gui"><span class="nav-number">34.2.</span> <span class="nav-text">gui</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 – <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jerry</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">107k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">1:38</span>
  
</div>


  



  <div class="powered-by">由 <a class="theme-link" target="_blank" rel="external nofollow" href="https://hexo.io">Hexo</a> 强力驱动 v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a class="theme-link" target="_blank" rel="external nofollow" href="https://theme-next.org">NexT.Gemini</a> v6.4.0</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="总访客量">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="总访问量">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>






  <script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=65977108";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  













  



  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/theme-next/theme-next-reading-progress@1.1/reading_progress.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.4.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.0"></script>



  

  
    <script id="dsq-count-scr" src="https://myoss.disqus.com/count.js" async></script>
  

  
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'https://blog.myoss.app/2016/Git操作/';
        this.page.identifier = '2016/Git操作/';
        this.page.title = 'Git操作';
        };
      function loadComments () {
        var d = document, s = d.createElement('script');
        s.src = 'https://myoss.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      }
      
        loadComments();
      
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script>
    
    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function ({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
            Counter('put', `/classes/Counter/${counter.objectId}`, JSON.stringify({ time: { "__op":"Increment", "amount":1 } }))
            
            .done(function () {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(counter.time + 1);
            })
            
            .fail(function ({ responseJSON }) {
                console.log('Failed to save Visitor num, with error message: ' + responseJSON.error);
            })
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! See more at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see here how to solve it: https://github.com/theme-next/hexo-leancloud-counter-security. \n But you also can use LeanCloud without security, by set \'security\' option to \'false\'.');
            
          }
        })
      .fail(function ({ responseJSON }) {
        console.log('LeanCloud Counter Error:' + responseJSON.code + " " + responseJSON.error);
      });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + "UkL0nPhjdELnTDIQSpNgWpUc-gzGzoHsz")
        .done(function ({ api_server }) {
          var Counter = function (method, url, data) {
            return $.ajax({
              method: method,
              url: `https://${api_server}/1.1${url}`,
              headers: {
                'X-LC-Id': "UkL0nPhjdELnTDIQSpNgWpUc-gzGzoHsz",
                'X-LC-Key': "HlYcuUYr5IlDSbtWWpWLG5VP",
                'Content-Type': 'application/json',
              },
              data: data,
            });
          };
          
          addCount(Counter);
          
        })
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  
  

  
  
  
    
  
  <script src="https://cdn.jsdelivr.net/npm/pangu@3.3.0/dist/browser/pangu.min.js"></script>
  <script type="text/javascript">pangu.spacingPage();</script>


  

  

  
  
  
    
  
  <script src="https://cdn.jsdelivr.net/gh/theme-next/theme-next-bookmark@latest/bookmark.min.js"></script>
  <script type="text/javascript">
  
    bookmark.scrollToMark('auto', "#更多");
  
  </script>


  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 8px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('复制成功')
          else $(this).text('复制失败')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script>


</body>
</html>
